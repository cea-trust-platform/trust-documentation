<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.1" xml:lang="en-US">
  <compounddef id="Schema__Comm__Vecteurs_8h" kind="file" language="C++">
    <compoundname>Schema_Comm_Vecteurs.h</compoundname>
    <includes refid="TRUSTArray_8h" local="no">TRUSTArray.h</includes>
    <includedby refid="Multigrille__base_8cpp" local="no">Multigrille_base.cpp</includedby>
    <includedby refid="Redistribute__Field_8h" local="no">Redistribute_Field.h</includedby>
    <includedby refid="VDF__to__IJK_8cpp" local="no">VDF_to_IJK.cpp</includedby>
    <includedby refid="VDF__to__IJK_8tpp" local="no">VDF_to_IJK.tpp</includedby>
    <includedby refid="MD__Vector__std_8h" local="no">MD_Vector_std.h</includedby>
    <includedby refid="MD__Vector__tools_8cpp" local="no">MD_Vector_tools.cpp</includedby>
    <includedby refid="Schema__Comm__Vecteurs_8cpp" local="no">Schema_Comm_Vecteurs.cpp</includedby>
    <includedby refid="MAIN_8cpp" local="no">MAIN.cpp</includedby>
    <innerclass refid="classSchema__Comm__Vecteurs" prot="public">Schema_Comm_Vecteurs</innerclass>
    <innerclass refid="classSchema__Comm__Vecteurs__Static__Data" prot="public">Schema_Comm_Vecteurs_Static_Data</innerclass>
      <sectiondef kind="define">
      <memberdef kind="define" id="Schema__Comm__Vecteurs_8h_1acaaec25a198425e04f2cab9826df83e6" prot="public" static="no">
        <name>ALIGN_SIZE</name>
        <param><defname>ptr</defname></param>
        <param><defname>sz</defname></param>
        <initializer>ptr=sdata_.buffer_base_+((ptr-sdata_.buffer_base_+(sz-1))&amp;(~(sz-1)))</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Schema_Comm_Vecteurs.h" line="145" column="9" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Schema_Comm_Vecteurs.h" bodystart="145" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="Schema__Comm__Vecteurs_8h_1aabe0eb672d9fc4249b9bafe9dce85426" prot="public" static="no">
        <name>BLOCSIZE_DOUBLE</name>
        <param><defname>sz</defname></param>
        <initializer>(sz&lt;&lt;3)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Schema_Comm_Vecteurs.h" line="143" column="9" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Schema_Comm_Vecteurs.h" bodystart="143" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="Schema__Comm__Vecteurs_8h_1abb58170ecda02e5c22a08a67deb6d24b" prot="public" static="no">
        <name>BLOCSIZE_FLOAT</name>
        <param><defname>sz</defname></param>
        <initializer>(sz&lt;&lt;2)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Schema_Comm_Vecteurs.h" line="144" column="9" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Schema_Comm_Vecteurs.h" bodystart="144" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="Schema__Comm__Vecteurs_8h_1ada4317c273dab21bc78c5f5882f99997" prot="public" static="no">
        <name>BLOCSIZE_INT</name>
        <param><defname>sz</defname></param>
        <initializer>(sz&lt;&lt;2)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Schema_Comm_Vecteurs.h" line="140" column="10" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Schema_Comm_Vecteurs.h" bodystart="140" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="var">
      <memberdef kind="variable" id="Schema__Comm__Vecteurs_8h_1a6321cd0ca8371646e8147bc4581126c0" prot="public" static="no" mutable="no">
        <type>bool</type>
        <definition>bool check_comm_vector</definition>
        <argsstring></argsstring>
        <name>check_comm_vector</name>
        <briefdescription>
<para>Classe outil utilisee notamment par les methodes MD_Vector::echange_espace_virtuel() </para>
        </briefdescription>
        <detaileddescription>
<para>Permet d&apos;echanger avec d&apos;autres processeurs des blocs d&apos;ints ou de double accessibles par des tableaux dans lesquels on lit et on ecrit directement (contrairement a <ref refid="classSchema__Comm" kindref="compound">Schema_Comm</ref> qui utilise readOn et printOn, plus lent). Pour des raisons de performances, la communication est separee en deux parties<itemizedlist>
<listitem><para>definition des tailles de buffers (permet d&apos;allouer a l&apos;avance les bufffers begin_init() add_send/recv_area_int/double(processeur, size) (declaration des types, tailles et processeurs destinataire des blocs que l&apos;on va envoyer, on peut envoyer plusieurs blocs de types identiques ou differents a chaque processeur) end_init()</para>
</listitem><listitem><para>echange de donnees (autant de fois qu&apos;on veut): begin_comm() for(each bloc to send) { ArrOfInt/Double &amp; buf = get_next_area_int/double(pe, size); for (i=0; i&lt;size; i++) buf[i] = ... } exchange(); for (each bloc to recv) { ... get_next_area_int/double(...) end_comm(); </para>
</listitem></itemizedlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Schema_Comm_Vecteurs.h" line="48" column="13" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Schema_Comm_Vecteurs.cpp" bodystart="30" bodyend="-1" declfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Schema_Comm_Vecteurs.h" declline="48" declcolumn="13"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/****************************************************************************</highlight></codeline>
<codeline lineno="2"><highlight class="comment">*<sp/>Copyright<sp/>(c)<sp/>2025,<sp/>CEA</highlight></codeline>
<codeline lineno="3"><highlight class="comment">*<sp/>All<sp/>rights<sp/>reserved.</highlight></codeline>
<codeline lineno="4"><highlight class="comment">*</highlight></codeline>
<codeline lineno="5"><highlight class="comment">*<sp/>Redistribution<sp/>and<sp/>use<sp/>in<sp/>source<sp/>and<sp/>binary<sp/>forms,<sp/>with<sp/>or<sp/>without<sp/>modification,<sp/>are<sp/>permitted<sp/>provided<sp/>that<sp/>the<sp/>following<sp/>conditions<sp/>are<sp/>met:</highlight></codeline>
<codeline lineno="6"><highlight class="comment">*<sp/>1.<sp/>Redistributions<sp/>of<sp/>source<sp/>code<sp/>must<sp/>retain<sp/>the<sp/>above<sp/>copyright<sp/>notice,<sp/>this<sp/>list<sp/>of<sp/>conditions<sp/>and<sp/>the<sp/>following<sp/>disclaimer.</highlight></codeline>
<codeline lineno="7"><highlight class="comment">*<sp/>2.<sp/>Redistributions<sp/>in<sp/>binary<sp/>form<sp/>must<sp/>reproduce<sp/>the<sp/>above<sp/>copyright<sp/>notice,<sp/>this<sp/>list<sp/>of<sp/>conditions<sp/>and<sp/>the<sp/>following<sp/>disclaimer<sp/>in<sp/>the<sp/>documentation<sp/>and/or<sp/>other<sp/>materials<sp/>provided<sp/>with<sp/>the<sp/>distribution.</highlight></codeline>
<codeline lineno="8"><highlight class="comment">*<sp/>3.<sp/>Neither<sp/>the<sp/>name<sp/>of<sp/>the<sp/>copyright<sp/>holder<sp/>nor<sp/>the<sp/>names<sp/>of<sp/>its<sp/>contributors<sp/>may<sp/>be<sp/>used<sp/>to<sp/>endorse<sp/>or<sp/>promote<sp/>products<sp/>derived<sp/>from<sp/>this<sp/>software<sp/>without<sp/>specific<sp/>prior<sp/>written<sp/>permission.</highlight></codeline>
<codeline lineno="9"><highlight class="comment">*</highlight></codeline>
<codeline lineno="10"><highlight class="comment">*<sp/>THIS<sp/>SOFTWARE<sp/>IS<sp/>PROVIDED<sp/>BY<sp/>THE<sp/>COPYRIGHT<sp/>HOLDERS<sp/>AND<sp/>CONTRIBUTORS<sp/>&quot;AS<sp/>IS&quot;<sp/>AND<sp/>ANY<sp/>EXPRESS<sp/>OR<sp/>IMPLIED<sp/>WARRANTIES,<sp/>INCLUDING,<sp/>BUT<sp/>NOT<sp/>LIMITED<sp/>TO,<sp/>THE<sp/>IMPLIED<sp/>WARRANTIES<sp/>OF<sp/>MERCHANTABILITY<sp/>AND<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR<sp/>PURPOSE<sp/>ARE<sp/>DISCLAIMED.</highlight></codeline>
<codeline lineno="11"><highlight class="comment">*<sp/>IN<sp/>NO<sp/>EVENT<sp/>SHALL<sp/>THE<sp/>COPYRIGHT<sp/>HOLDER<sp/>OR<sp/>CONTRIBUTORS<sp/>BE<sp/>LIABLE<sp/>FOR<sp/>ANY<sp/>DIRECT,<sp/>INDIRECT,<sp/>INCIDENTAL,<sp/>SPECIAL,<sp/>EXEMPLARY,<sp/>OR<sp/>CONSEQUENTIAL<sp/>DAMAGES<sp/>(INCLUDING,<sp/>BUT<sp/>NOT<sp/>LIMITED<sp/>TO,<sp/>PROCUREMENT<sp/>OF<sp/>SUBSTITUTE<sp/>GOODS<sp/>OR<sp/>SERVICES;<sp/>LOSS<sp/>OF<sp/>USE,<sp/>DATA,<sp/>OR<sp/>PROFITS;</highlight></codeline>
<codeline lineno="12"><highlight class="comment">*<sp/>OR<sp/>BUSINESS<sp/>INTERRUPTION)<sp/>HOWEVER<sp/>CAUSED<sp/>AND<sp/>ON<sp/>ANY<sp/>THEORY<sp/>OF<sp/>LIABILITY,<sp/>WHETHER<sp/>IN<sp/>CONTRACT,<sp/>STRICT<sp/>LIABILITY,<sp/>OR<sp/>TORT<sp/>(INCLUDING<sp/>NEGLIGENCE<sp/>OR<sp/>OTHERWISE)<sp/>ARISING<sp/>IN<sp/>ANY<sp/>WAY<sp/>OUT<sp/>OF<sp/>THE<sp/>USE<sp/>OF<sp/>THIS<sp/>SOFTWARE,<sp/>EVEN<sp/>IF<sp/>ADVISED<sp/>OF<sp/>THE<sp/>POSSIBILITY<sp/>OF<sp/>SUCH<sp/>DAMAGE.</highlight></codeline>
<codeline lineno="13"><highlight class="comment">*</highlight></codeline>
<codeline lineno="14"><highlight class="comment">*****************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>Schema_Comm_Vecteurs_included</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>Schema_Comm_Vecteurs_included</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;TRUSTArray.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classSchema__Comm__Vecteurs__Static__Data" kindref="compound">Schema_Comm_Vecteurs_Static_Data</ref>;</highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="23"><highlight class="comment">/*!<sp/>@brief<sp/>Classe<sp/>outil<sp/>utilisee<sp/>notamment<sp/>par<sp/>les<sp/>methodes<sp/>MD_Vector::echange_espace_virtuel()</highlight></codeline>
<codeline lineno="24"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="25"><highlight class="comment"><sp/>*<sp/>Permet<sp/>d&apos;echanger<sp/>avec<sp/>d&apos;autres<sp/>processeurs<sp/>des<sp/>blocs<sp/>d&apos;ints<sp/>ou<sp/>de<sp/>double</highlight></codeline>
<codeline lineno="26"><highlight class="comment"><sp/>*<sp/>accessibles<sp/>par<sp/>des<sp/>tableaux<sp/>dans<sp/>lesquels<sp/>on<sp/>lit<sp/>et<sp/>on<sp/>ecrit<sp/>directement</highlight></codeline>
<codeline lineno="27"><highlight class="comment"><sp/>*<sp/><sp/><sp/>(contrairement<sp/>a<sp/>Schema_Comm<sp/>qui<sp/>utilise<sp/>readOn<sp/>et<sp/>printOn,<sp/>plus<sp/>lent).</highlight></codeline>
<codeline lineno="28"><highlight class="comment"><sp/>*<sp/><sp/><sp/>Pour<sp/>des<sp/>raisons<sp/>de<sp/>performances,<sp/>la<sp/>communication<sp/>est<sp/>separee<sp/>en<sp/>deux<sp/>parties</highlight></codeline>
<codeline lineno="29"><highlight class="comment"><sp/>*<sp/><sp/><sp/>-<sp/>definition<sp/>des<sp/>tailles<sp/>de<sp/>buffers<sp/>(permet<sp/>d&apos;allouer<sp/>a<sp/>l&apos;avance<sp/>les<sp/>bufffers</highlight></codeline>
<codeline lineno="30"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/>begin_init()</highlight></codeline>
<codeline lineno="31"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/>add_send/recv_area_int/double(processeur,<sp/>size)</highlight></codeline>
<codeline lineno="32"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/>(declaration<sp/>des<sp/>types,<sp/>tailles<sp/>et<sp/>processeurs<sp/>destinataire<sp/>des<sp/>blocs<sp/>que<sp/>l&apos;on<sp/>va<sp/>envoyer,</highlight></codeline>
<codeline lineno="33"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>on<sp/>peut<sp/>envoyer<sp/>plusieurs<sp/>blocs<sp/>de<sp/>types<sp/>identiques<sp/>ou<sp/>differents<sp/>a<sp/>chaque<sp/>processeur)</highlight></codeline>
<codeline lineno="34"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/>end_init()</highlight></codeline>
<codeline lineno="35"><highlight class="comment"><sp/>*<sp/><sp/><sp/>-<sp/>echange<sp/>de<sp/>donnees<sp/>(autant<sp/>de<sp/>fois<sp/>qu&apos;on<sp/>veut):</highlight></codeline>
<codeline lineno="36"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/>begin_comm()</highlight></codeline>
<codeline lineno="37"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/>for(each<sp/>bloc<sp/>to<sp/>send)<sp/>{</highlight></codeline>
<codeline lineno="38"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/>ArrOfInt/Double<sp/>&amp;<sp/>buf<sp/>=<sp/>get_next_area_int/double(pe,<sp/>size);</highlight></codeline>
<codeline lineno="39"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/>for<sp/>(i=0;<sp/>i&lt;size;<sp/>i++)</highlight></codeline>
<codeline lineno="40"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>buf[i]<sp/>=<sp/>...</highlight></codeline>
<codeline lineno="41"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="42"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/>exchange();</highlight></codeline>
<codeline lineno="43"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/>for<sp/>(each<sp/>bloc<sp/>to<sp/>recv)<sp/>{</highlight></codeline>
<codeline lineno="44"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>...<sp/>get_next_area_int/double(...)</highlight></codeline>
<codeline lineno="45"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/>end_comm();</highlight></codeline>
<codeline lineno="46"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="47"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>check_comm_vector;</highlight></codeline>
<codeline lineno="49" refid="classSchema__Comm__Vecteurs" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classSchema__Comm__Vecteurs" kindref="compound">Schema_Comm_Vecteurs</ref></highlight></codeline>
<codeline lineno="50"><highlight class="normal">{</highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="keyword">public</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1a6951f896ebedb99dad6dfbcfe4be7a67" kindref="member">Schema_Comm_Vecteurs</ref>();</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1ad98e7188d4e47242a0fae0c98a49cbdb" kindref="member">~Schema_Comm_Vecteurs</ref>();</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1a611c6c0d69aae3a85657a4811a745dd6" kindref="member">begin_init</ref>();</highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">template</highlight><highlight class="normal"><sp/>&lt;</highlight><highlight class="keyword">typename</highlight><highlight class="normal"><sp/>_TYPE_&gt;</highlight></codeline>
<codeline lineno="57" refid="classSchema__Comm__Vecteurs_1a04540bb902052f779db8e9b7e3258413" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1a04540bb902052f779db8e9b7e3258413" kindref="member">add_send_area_template</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size);</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">template</highlight><highlight class="normal"><sp/>&lt;</highlight><highlight class="keyword">typename</highlight><highlight class="normal"><sp/>_TYPE_&gt;</highlight></codeline>
<codeline lineno="60" refid="classSchema__Comm__Vecteurs_1a54b7a68be3760e0f2bf9341fe4cf8370" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1a54b7a68be3760e0f2bf9341fe4cf8370" kindref="member">add_recv_area_template</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size);</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">template</highlight><highlight class="normal"><sp/>&lt;</highlight><highlight class="keyword">typename</highlight><highlight class="normal"><sp/>_TYPE_&gt;</highlight></codeline>
<codeline lineno="63" refid="classSchema__Comm__Vecteurs_1a8942e69abba8688e3037f95bc242c573" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/><ref refid="classTRUSTArray" kindref="compound">TRUSTArray&lt;_TYPE_&gt;</ref>&amp;<sp/><ref refid="classSchema__Comm__Vecteurs_1a8942e69abba8688e3037f95bc242c573" kindref="member">get_next_area_template</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>array_size);</highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1a60c477436f012ff4caadc23b4f6626d9" kindref="member">end_init</ref>();</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1ae2443257b3501522c98a342f46250eef" kindref="member">begin_comm</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bufferOnDevice=</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1abf1ef0ef60e6756f9c4c8346262a35b1" kindref="member">exchange</ref>();</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1a09f608641aa8e3349ac966b1eb3b07e1" kindref="member">end_comm</ref>();</highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1ae5617eaa2f2ed35c3c0cd9e28488e46a" kindref="member">CleanMyStaticViews</ref>();</highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight><highlight class="keyword">protected</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1afbb8c49e9547fccf62d04e97ae42f447" kindref="member">add</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size,<sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfInt</ref>&amp;<sp/>procs,<sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfInt</ref>&amp;<sp/>buf_sizes,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>align_size);</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1a8df69217bc72cd248b24e733301297eb" kindref="member">check_buffers_full</ref>()<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1a4b8c1defca657eaaa9aab90c9cedebe3" kindref="member">check_next_area</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>byte_size)<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Pour<sp/>chaque<sp/>processeur<sp/>de<sp/>send_proc<sp/>ou<sp/>recv_proc_,<sp/>taille<sp/>totale<sp/>des<sp/>buffers<sp/>en<sp/>&quot;bytes&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Pendant<sp/>la<sp/>phase<sp/>begin_init(),<sp/>ces<sp/>deux<sp/>tableaux<sp/>sont<sp/>de<sp/>taille<sp/>nproc(),<sp/>valeur<sp/>nulle</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>pour<sp/>les<sp/>processeurs<sp/>a<sp/>qui<sp/>on<sp/>ne<sp/>parle<sp/>pas.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>ensuite,<sp/>il<sp/>sont<sp/>de<sp/>la<sp/>meme<sp/>taille<sp/>que<sp/>send_procs_<sp/>et<sp/>recv_procs_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81" refid="classSchema__Comm__Vecteurs_1a3f5e5544b71d235ea283f7f8beb2665e" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfInt</ref><sp/><ref refid="classSchema__Comm__Vecteurs_1a3f5e5544b71d235ea283f7f8beb2665e" kindref="member">send_buf_sizes_</ref>;</highlight></codeline>
<codeline lineno="82" refid="classSchema__Comm__Vecteurs_1ada2157628cf7d00fbedf8fd12cebcca0" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfInt</ref><sp/><ref refid="classSchema__Comm__Vecteurs_1ada2157628cf7d00fbedf8fd12cebcca0" kindref="member">recv_buf_sizes_</ref>;</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Liste<sp/>des<sp/>proceseurs<sp/>a<sp/>qui<sp/>on<sp/>envoie<sp/>des<sp/>donnees</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84" refid="classSchema__Comm__Vecteurs_1ac4bee61e3e8a6a0d34e525f6eae82381" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfInt</ref><sp/><ref refid="classSchema__Comm__Vecteurs_1ac4bee61e3e8a6a0d34e525f6eae82381" kindref="member">send_procs_</ref>;</highlight></codeline>
<codeline lineno="85" refid="classSchema__Comm__Vecteurs_1a71a5b90321747f416727a654100b89d5" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfInt</ref><sp/><ref refid="classSchema__Comm__Vecteurs_1a71a5b90321747f416727a654100b89d5" kindref="member">recv_procs_</ref>;</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>A<sp/>l&apos;issue<sp/>de<sp/>la<sp/>phase<sp/>d&apos;initialisation,<sp/>les<sp/>processeurs<sp/>sont-ils<sp/>dans<sp/>l&apos;ordre<sp/>croissant<sp/>?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="87" refid="classSchema__Comm__Vecteurs_1af1bf17b00de4bd2e96695f94f68ea791" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1af1bf17b00de4bd2e96695f94f68ea791" kindref="member">sorted_</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Taille<sp/>du<sp/>buffer<sp/>requis<sp/>pour<sp/>ce<sp/>schema</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89" refid="classSchema__Comm__Vecteurs_1aca1abcf441c2f3c71b392ac830bbc912" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1aca1abcf441c2f3c71b392ac830bbc912" kindref="member">min_buf_size_</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Buffer<sp/>packing/uncpacking<sp/>on<sp/>device:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="91" refid="classSchema__Comm__Vecteurs_1a598f70092c4c8b49918560f1c3b6b084" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1a598f70092c4c8b49918560f1c3b6b084" kindref="member">bufferOnDevice_</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Support<sp/>GPU<sp/>par<sp/>MPI:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93" refid="classSchema__Comm__Vecteurs_1a3fa09b2dba71a511d3df5e1559d0b5f7" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1a3fa09b2dba71a511d3df5e1559d0b5f7" kindref="member">use_gpu_aware_mpi_</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95" refid="classSchema__Comm__Vecteurs_1af0b3633b2b20429b5d91bc5b13a3fa7fa875fbe2bdd16fe2e9dac04573165b674" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1af0b3633b2b20429b5d91bc5b13a3fa7f" kindref="member">Status</ref><sp/>{<sp/><ref refid="classSchema__Comm__Vecteurs_1af0b3633b2b20429b5d91bc5b13a3fa7faab624dd5c19c008840a1aa849d9e82dc" kindref="member">RESET</ref>,<sp/><ref refid="classSchema__Comm__Vecteurs_1af0b3633b2b20429b5d91bc5b13a3fa7fa707bf7dddcf9ecd02c8606e508a21449" kindref="member">BEGIN_INIT</ref>,<sp/><ref refid="classSchema__Comm__Vecteurs_1af0b3633b2b20429b5d91bc5b13a3fa7fab012d408c1973759c4c1877bd2f4e2b1" kindref="member">END_INIT</ref>,<sp/><ref refid="classSchema__Comm__Vecteurs_1af0b3633b2b20429b5d91bc5b13a3fa7fa875fbe2bdd16fe2e9dac04573165b674" kindref="member">BEGIN_COMM</ref>,<sp/><ref refid="classSchema__Comm__Vecteurs_1af0b3633b2b20429b5d91bc5b13a3fa7fa5e2a97a86e391667109817a944f3df14" kindref="member">EXCHANGED</ref><sp/>};</highlight></codeline>
<codeline lineno="96" refid="classSchema__Comm__Vecteurs_1a9554e2a80041d4a475fe57ca335fd624" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1af0b3633b2b20429b5d91bc5b13a3fa7f" kindref="member">Status</ref><sp/><ref refid="classSchema__Comm__Vecteurs_1a9554e2a80041d4a475fe57ca335fd624" kindref="member">status_</ref>;</highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Le<sp/>buffer<sp/>global<sp/>est-il<sp/>en<sp/>cours<sp/>d&apos;utilisation<sp/>?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="99" refid="classSchema__Comm__Vecteurs_1aa9382fd07c9e6a1c34c697c3a259b40b" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1aa9382fd07c9e6a1c34c697c3a259b40b" kindref="member">buffer_locked_</ref>;</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Zones<sp/>temporaires<sp/>de<sp/>lecture/ecriture,<sp/>renvoyees<sp/>par<sp/>get_next...<sp/>et<sp/>qui<sp/>pointent<sp/>dans<sp/>buffer_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="101" refid="classSchema__Comm__Vecteurs_1a2fab4d2b9a4370b5be227b0221b5f16b" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfDouble</ref><sp/><ref refid="classSchema__Comm__Vecteurs_1a2fab4d2b9a4370b5be227b0221b5f16b" kindref="member">tmp_area_double_</ref>;</highlight></codeline>
<codeline lineno="102" refid="classSchema__Comm__Vecteurs_1a9859acbe7edd237474ed91c00582567c" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfFloat</ref><sp/><ref refid="classSchema__Comm__Vecteurs_1a9859acbe7edd237474ed91c00582567c" kindref="member">tmp_area_float_</ref>;</highlight></codeline>
<codeline lineno="103" refid="classSchema__Comm__Vecteurs_1a76a394eefd359ca8c00c459124aa4433" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfInt</ref><sp/><ref refid="classSchema__Comm__Vecteurs_1a76a394eefd359ca8c00c459124aa4433" kindref="member">tmp_area_int_</ref>;</highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>INT_is_64_<sp/>==<sp/>2</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfTID</ref><sp/>tmp_area_tid_;</highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Classe<sp/>contenant<sp/>des<sp/>tableaux<sp/>malloc<sp/>(pour<sp/>destruction<sp/>automatique<sp/>en<sp/>fin<sp/>d&apos;execution)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109" refid="classSchema__Comm__Vecteurs_1a09a2147eb4b5adfa654bee03e3c18f8a" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs__Static__Data" kindref="compound">Schema_Comm_Vecteurs_Static_Data</ref><sp/><ref refid="classSchema__Comm__Vecteurs_1a09a2147eb4b5adfa654bee03e3c18f8a" kindref="member">sdata_</ref>;</highlight></codeline>
<codeline lineno="110"><highlight class="normal">};</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="112"><highlight class="comment">/*!<sp/>@brief<sp/>Donnees<sp/>statiques<sp/>communes<sp/>a<sp/>toutes<sp/>les<sp/>classes<sp/>Schema_Comm_Vecteur,<sp/>avec<sp/>destructeur<sp/>pour<sp/>liberer<sp/>la<sp/>memoire<sp/>en<sp/>fin<sp/>d&apos;execution</highlight></codeline>
<codeline lineno="113"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="114"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="115" refid="classSchema__Comm__Vecteurs__Static__Data" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classSchema__Comm__Vecteurs__Static__Data" kindref="compound">Schema_Comm_Vecteurs_Static_Data</ref></highlight></codeline>
<codeline lineno="116"><highlight class="normal">{</highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight><highlight class="keyword">public</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs__Static__Data_1accb766de57a5b0363ad0e07f5004c330" kindref="member">Schema_Comm_Vecteurs_Static_Data</ref>();</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs__Static__Data_1ad938efa7d8155bcd8909735fe6634a5e" kindref="member">~Schema_Comm_Vecteurs_Static_Data</ref>();</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs__Static__Data_1a843e8415a19a89929a522e2a8a9913ea" kindref="member">init</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>bufferOnDevice);</highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122" refid="classSchema__Comm__Vecteurs__Static__Data_1a17c27dc3ea91f86491469dc8a68ded0b" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><sp/>*<ref refid="classSchema__Comm__Vecteurs__Static__Data_1a17c27dc3ea91f86491469dc8a68ded0b" kindref="member">buffer_base_</ref>;</highlight></codeline>
<codeline lineno="123" refid="classSchema__Comm__Vecteurs__Static__Data_1a49e6d562d9107c76f4b09c94d2afaa04" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs__Static__Data_1a49e6d562d9107c76f4b09c94d2afaa04" kindref="member">buffer_base_size_</ref>;</highlight></codeline>
<codeline lineno="124" refid="classSchema__Comm__Vecteurs__Static__Data_1a699188fda33fe373ff7017b30cb09cac" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs__Static__Data_1a699188fda33fe373ff7017b30cb09cac" kindref="member">buffer_base_device_size_</ref>;</highlight></codeline>
<codeline lineno="125" refid="classSchema__Comm__Vecteurs__Static__Data_1a28f343988f1e7d0e8795e0d031efe439" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs__Static__Data_1a28f343988f1e7d0e8795e0d031efe439" kindref="member">buf_pointers_size_</ref>;</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Pour<sp/>chaque<sp/>processeur<sp/>entre<sp/>0<sp/>et<sp/>nproc(),<sp/>adresse<sp/>des<sp/>prochaines<sp/>donnees<sp/>a<sp/>lire/ecrire</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>de<sp/>ce<sp/>proc<sp/>dans<sp/>le<sp/>tableau<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128" refid="classSchema__Comm__Vecteurs__Static__Data_1a957a2b143d97af8d47d2bf69a377f9ea" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>**<ref refid="classSchema__Comm__Vecteurs__Static__Data_1a957a2b143d97af8d47d2bf69a377f9ea" kindref="member">buf_pointers_</ref>;</highlight></codeline>
<codeline lineno="129"><highlight class="normal">};</highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Taille<sp/>en<sp/>bytes<sp/>d&apos;un<sp/>bloc<sp/>de<sp/>sz<sp/>ints,<sp/>arrondi<sp/>aux<sp/>8<sp/>octets<sp/>superieurs</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>INT_is_64_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>INT_is_64_<sp/>==<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BLOCSIZE_INT(sz)<sp/>(sz&lt;&lt;3)<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>==<sp/>sz*8</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BLOCSIZE_INT(sz)<sp/>(sz&lt;&lt;2)<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>==<sp/>sz*4</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BLOCSIZE_TID(sz)<sp/>(sz&lt;&lt;3)<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>==<sp/>sz*8</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BLOCSIZE_INT(sz)<sp/>(sz&lt;&lt;2)<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>==<sp/>sz*4</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BLOCSIZE_DOUBLE(sz)<sp/>(sz&lt;&lt;3)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BLOCSIZE_FLOAT(sz)<sp/>(sz&lt;&lt;2)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>ALIGN_SIZE(ptr,sz)<sp/>ptr=sdata_.buffer_base_+((ptr-sdata_.buffer_base_+(sz-1))&amp;(~(sz-1)))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight></codeline>
<codeline lineno="147" refid="classSchema__Comm__Vecteurs_1afbb8c49e9547fccf62d04e97ae42f447" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1afbb8c49e9547fccf62d04e97ae42f447" kindref="member">Schema_Comm_Vecteurs::add</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size,<sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfInt</ref>&amp;<sp/>procs,<sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfInt</ref>&amp;<sp/>buf_sizes,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>align_size)</highlight></codeline>
<codeline lineno="148"><highlight class="normal">{</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/>assert(<ref refid="classSchema__Comm__Vecteurs_1a9554e2a80041d4a475fe57ca335fd624" kindref="member">status_</ref><sp/>==<sp/><ref refid="classSchema__Comm__Vecteurs_1af0b3633b2b20429b5d91bc5b13a3fa7fa707bf7dddcf9ecd02c8606e508a21449" kindref="member">BEGIN_INIT</ref>);</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/>assert(size<sp/>&gt;=<sp/>0);</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">&amp;<sp/>x<sp/>=<sp/>buf_sizes[pe];</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(x<sp/>==<sp/>0<sp/>&amp;&amp;<sp/>size<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>n<sp/>=<sp/>procs.<ref refid="classTRUSTArray_1a48b5aa02624ffdc0bad44ca38ddd1a1c" kindref="member">size_array</ref>();</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(n<sp/>&gt;<sp/>0<sp/>&amp;&amp;<sp/>procs[n<sp/>-<sp/>1]<sp/>&gt;<sp/>pe)</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1af1bf17b00de4bd2e96695f94f68ea791" kindref="member">sorted_</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>procs.<ref refid="classTRUSTArray_1a3bbfcd5ab081affbdc18217c813fcba7" kindref="member">append_array</ref>(pe);</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/>x<sp/>=<sp/>((x<sp/>+<sp/>align_size<sp/>-<sp/>1)<sp/>&amp;<sp/>(~(align_size<sp/>-<sp/>1)))<sp/>+<sp/>size;<sp/></highlight><highlight class="comment">//<sp/>Padding<sp/>before<sp/>block</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal">}</highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="162" refid="classSchema__Comm__Vecteurs_1ae5617eaa2f2ed35c3c0cd9e28488e46a" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1ae5617eaa2f2ed35c3c0cd9e28488e46a" kindref="member">Schema_Comm_Vecteurs::CleanMyStaticViews</ref>()</highlight></codeline>
<codeline lineno="163"><highlight class="normal">{</highlight></codeline>
<codeline lineno="164"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>KOKKOS<sp/></highlight><highlight class="comment">//If<sp/>Kokkos<sp/>is<sp/>defined,<sp/>we<sp/>can<sp/>clear<sp/>the<sp/>views</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1a2fab4d2b9a4370b5be227b0221b5f16b" kindref="member">tmp_area_double_</ref>.CleanMyView();</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1a9859acbe7edd237474ed91c00582567c" kindref="member">tmp_area_float_</ref>.CleanMyView();</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1a76a394eefd359ca8c00c459124aa4433" kindref="member">tmp_area_int_</ref>.CleanMyView();</highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="170"><highlight class="normal">}</highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal">&lt;&gt;</highlight></codeline>
<codeline lineno="172" refid="classSchema__Comm__Vecteurs_1a7ab46af87aae8bfdfd048b5608366eb0" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Schema_Comm_Vecteurs::add_send_area_template&lt;int&gt;(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size)</highlight></codeline>
<codeline lineno="173"><highlight class="normal">{</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1afbb8c49e9547fccf62d04e97ae42f447" kindref="member">add</ref>(pe,<sp/>BLOCSIZE_INT(size),<sp/><ref refid="classSchema__Comm__Vecteurs_1ac4bee61e3e8a6a0d34e525f6eae82381" kindref="member">send_procs_</ref>,<sp/><ref refid="classSchema__Comm__Vecteurs_1a3f5e5544b71d235ea283f7f8beb2665e" kindref="member">send_buf_sizes_</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="175"><highlight class="normal">}</highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal">&lt;&gt;</highlight></codeline>
<codeline lineno="178" refid="classSchema__Comm__Vecteurs_1a7ab46af87aae8bfdfd048b5608366eb0" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Schema_Comm_Vecteurs::add_send_area_template&lt;double&gt;(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size)</highlight></codeline>
<codeline lineno="179"><highlight class="normal">{</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1afbb8c49e9547fccf62d04e97ae42f447" kindref="member">add</ref>(pe,<sp/>BLOCSIZE_DOUBLE(size),<sp/><ref refid="classSchema__Comm__Vecteurs_1ac4bee61e3e8a6a0d34e525f6eae82381" kindref="member">send_procs_</ref>,<sp/><ref refid="classSchema__Comm__Vecteurs_1a3f5e5544b71d235ea283f7f8beb2665e" kindref="member">send_buf_sizes_</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="181"><highlight class="normal">}</highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal">&lt;&gt;</highlight></codeline>
<codeline lineno="184" refid="classSchema__Comm__Vecteurs_1a7ab46af87aae8bfdfd048b5608366eb0" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Schema_Comm_Vecteurs::add_send_area_template&lt;float&gt;(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size)</highlight></codeline>
<codeline lineno="185"><highlight class="normal">{</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1afbb8c49e9547fccf62d04e97ae42f447" kindref="member">add</ref>(pe,<sp/>BLOCSIZE_FLOAT(size),<sp/><ref refid="classSchema__Comm__Vecteurs_1ac4bee61e3e8a6a0d34e525f6eae82381" kindref="member">send_procs_</ref>,<sp/><ref refid="classSchema__Comm__Vecteurs_1a3f5e5544b71d235ea283f7f8beb2665e" kindref="member">send_buf_sizes_</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="187"><highlight class="normal">}</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal">&lt;&gt;</highlight></codeline>
<codeline lineno="190" refid="classSchema__Comm__Vecteurs_1a48b429b43b73e08e75330f7af779285f" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Schema_Comm_Vecteurs::add_recv_area_template&lt;int&gt;(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size)</highlight></codeline>
<codeline lineno="191"><highlight class="normal">{</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1afbb8c49e9547fccf62d04e97ae42f447" kindref="member">add</ref>(pe,<sp/>BLOCSIZE_INT(size),<sp/><ref refid="classSchema__Comm__Vecteurs_1a71a5b90321747f416727a654100b89d5" kindref="member">recv_procs_</ref>,<sp/><ref refid="classSchema__Comm__Vecteurs_1ada2157628cf7d00fbedf8fd12cebcca0" kindref="member">recv_buf_sizes_</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="193"><highlight class="normal">}</highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal">&lt;&gt;</highlight></codeline>
<codeline lineno="196" refid="classSchema__Comm__Vecteurs_1a48b429b43b73e08e75330f7af779285f" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Schema_Comm_Vecteurs::add_recv_area_template&lt;double&gt;(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size)</highlight></codeline>
<codeline lineno="197"><highlight class="normal">{</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1afbb8c49e9547fccf62d04e97ae42f447" kindref="member">add</ref>(pe,<sp/>BLOCSIZE_DOUBLE(size),<sp/><ref refid="classSchema__Comm__Vecteurs_1a71a5b90321747f416727a654100b89d5" kindref="member">recv_procs_</ref>,<sp/><ref refid="classSchema__Comm__Vecteurs_1ada2157628cf7d00fbedf8fd12cebcca0" kindref="member">recv_buf_sizes_</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="199"><highlight class="normal">}</highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal">&lt;&gt;</highlight></codeline>
<codeline lineno="202" refid="classSchema__Comm__Vecteurs_1a48b429b43b73e08e75330f7af779285f" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Schema_Comm_Vecteurs::add_recv_area_template&lt;float&gt;(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size)</highlight></codeline>
<codeline lineno="203"><highlight class="normal">{</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1afbb8c49e9547fccf62d04e97ae42f447" kindref="member">add</ref>(pe,<sp/>BLOCSIZE_FLOAT(size),<sp/><ref refid="classSchema__Comm__Vecteurs_1a71a5b90321747f416727a654100b89d5" kindref="member">recv_procs_</ref>,<sp/><ref refid="classSchema__Comm__Vecteurs_1ada2157628cf7d00fbedf8fd12cebcca0" kindref="member">recv_buf_sizes_</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="205"><highlight class="normal">}</highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>INT_is_64_<sp/>==<sp/>2</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal">&lt;&gt;</highlight></codeline>
<codeline lineno="209"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Schema_Comm_Vecteurs::add_send_area_template&lt;trustIdType&gt;(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size)</highlight></codeline>
<codeline lineno="210"><highlight class="normal">{</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1afbb8c49e9547fccf62d04e97ae42f447" kindref="member">add</ref>(pe,<sp/>BLOCSIZE_TID(size),<sp/><ref refid="classSchema__Comm__Vecteurs_1ac4bee61e3e8a6a0d34e525f6eae82381" kindref="member">send_procs_</ref>,<sp/><ref refid="classSchema__Comm__Vecteurs_1a3f5e5544b71d235ea283f7f8beb2665e" kindref="member">send_buf_sizes_</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(trustIdType));</highlight></codeline>
<codeline lineno="212"><highlight class="normal">}</highlight></codeline>
<codeline lineno="213"><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal">&lt;&gt;</highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Schema_Comm_Vecteurs::add_recv_area_template&lt;trustIdType&gt;(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size)</highlight></codeline>
<codeline lineno="216"><highlight class="normal">{</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1afbb8c49e9547fccf62d04e97ae42f447" kindref="member">add</ref>(pe,<sp/>BLOCSIZE_TID(size),<sp/><ref refid="classSchema__Comm__Vecteurs_1a71a5b90321747f416727a654100b89d5" kindref="member">recv_procs_</ref>,<sp/><ref refid="classSchema__Comm__Vecteurs_1ada2157628cf7d00fbedf8fd12cebcca0" kindref="member">recv_buf_sizes_</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(trustIdType));</highlight></codeline>
<codeline lineno="218"><highlight class="normal">}</highlight></codeline>
<codeline lineno="219"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="221"><highlight class="comment">/*!<sp/>@brief<sp/>renvoie<sp/>un<sp/>tableau<sp/>contenant<sp/>les<sp/>&quot;size&quot;<sp/>valeurs<sp/>suivantes<sp/>recues<sp/>du<sp/>processeur<sp/>pe<sp/>lors<sp/>de<sp/>la<sp/>communication<sp/>en<sp/>cours.</highlight></codeline>
<codeline lineno="222"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="223"><highlight class="comment"><sp/>*<sp/><sp/><sp/>Attention:</highlight></codeline>
<codeline lineno="224"><highlight class="comment"><sp/>*<sp/><sp/><sp/>Le<sp/>tableau<sp/>renvoye<sp/>est<sp/>une<sp/>reference<sp/>a<sp/>un<sp/>tableau<sp/>interne<sp/>qui<sp/>n&apos;est<sp/>valide<sp/>que</highlight></codeline>
<codeline lineno="225"><highlight class="comment"><sp/>*<sp/><sp/><sp/>jusqu&apos;au<sp/>prochain<sp/>appel<sp/>a<sp/>une<sp/>methode<sp/>get_next_xxx.</highlight></codeline>
<codeline lineno="226"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="227"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal">&lt;&gt;</highlight></codeline>
<codeline lineno="229" refid="classSchema__Comm__Vecteurs_1a72db0533049cee7f8948ad85d1550a0c" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfInt</ref>&amp;<sp/>Schema_Comm_Vecteurs::get_next_area_template&lt;int&gt;(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size)</highlight></codeline>
<codeline lineno="230"><highlight class="normal">{</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/>ALIGN_SIZE(<ref refid="classSchema__Comm__Vecteurs_1a09a2147eb4b5adfa654bee03e3c18f8a" kindref="member">sdata_</ref>.<ref refid="classSchema__Comm__Vecteurs__Static__Data_1a957a2b143d97af8d47d2bf69a377f9ea" kindref="member">buf_pointers_</ref>[pe],<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/>assert(<ref refid="classSchema__Comm__Vecteurs_1a4b8c1defca657eaaa9aab90c9cedebe3" kindref="member">check_next_area</ref>(pe,<sp/>BLOCSIZE_INT(size)));</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*bufptr<sp/>=<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*)<sp/>(<ref refid="classSchema__Comm__Vecteurs_1a09a2147eb4b5adfa654bee03e3c18f8a" kindref="member">sdata_</ref>.<ref refid="classSchema__Comm__Vecteurs__Static__Data_1a957a2b143d97af8d47d2bf69a377f9ea" kindref="member">buf_pointers_</ref>[pe]);</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>attention<sp/>a<sp/>l&apos;arithmetique<sp/>de<sp/>pointeurs,<sp/>ajout<sp/>d&apos;une<sp/>taille<sp/>en<sp/>octets</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1a09a2147eb4b5adfa654bee03e3c18f8a" kindref="member">sdata_</ref>.<ref refid="classSchema__Comm__Vecteurs__Static__Data_1a957a2b143d97af8d47d2bf69a377f9ea" kindref="member">buf_pointers_</ref>[pe]<sp/>+=<sp/>BLOCSIZE_INT(size);</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1a76a394eefd359ca8c00c459124aa4433" kindref="member">tmp_area_int_</ref>.<ref refid="classTRUSTArray_1afa24187d1b5c32ef0f2014a8a0bdc24f" kindref="member">ref_data</ref>(bufptr,<sp/>size);</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1a76a394eefd359ca8c00c459124aa4433" kindref="member">tmp_area_int_</ref>.<ref refid="classTRUSTArray_1ad5dc5796f07a49a1a9f7c2dde29d30fb" kindref="member">set_data_location</ref>(<ref refid="classSchema__Comm__Vecteurs_1a598f70092c4c8b49918560f1c3b6b084" kindref="member">bufferOnDevice_</ref><sp/>?<sp/>DataLocation::Device<sp/>:<sp/>DataLocation::HostOnly);</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1a76a394eefd359ca8c00c459124aa4433" kindref="member">tmp_area_int_</ref>;</highlight></codeline>
<codeline lineno="239"><highlight class="normal">}</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>INT_is_64_<sp/>==<sp/>2</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal">&lt;&gt;</highlight></codeline>
<codeline lineno="243"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfTID</ref>&amp;<sp/>Schema_Comm_Vecteurs::get_next_area_template&lt;trustIdType&gt;(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size)</highlight></codeline>
<codeline lineno="244"><highlight class="normal">{</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/>ALIGN_SIZE(<ref refid="classSchema__Comm__Vecteurs_1a09a2147eb4b5adfa654bee03e3c18f8a" kindref="member">sdata_</ref>.<ref refid="classSchema__Comm__Vecteurs__Static__Data_1a957a2b143d97af8d47d2bf69a377f9ea" kindref="member">buf_pointers_</ref>[pe],<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(trustIdType));</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/>assert(<ref refid="classSchema__Comm__Vecteurs_1a4b8c1defca657eaaa9aab90c9cedebe3" kindref="member">check_next_area</ref>(pe,<sp/>BLOCSIZE_TID(size)));</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/>trustIdType<sp/>*bufptr<sp/>=<sp/>(trustIdType<sp/>*)<sp/>(<ref refid="classSchema__Comm__Vecteurs_1a09a2147eb4b5adfa654bee03e3c18f8a" kindref="member">sdata_</ref>.<ref refid="classSchema__Comm__Vecteurs__Static__Data_1a957a2b143d97af8d47d2bf69a377f9ea" kindref="member">buf_pointers_</ref>[pe]);</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>attention<sp/>a<sp/>l&apos;arithmetique<sp/>de<sp/>pointeurs,<sp/>ajout<sp/>d&apos;une<sp/>taille<sp/>en<sp/>octets</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1a09a2147eb4b5adfa654bee03e3c18f8a" kindref="member">sdata_</ref>.<ref refid="classSchema__Comm__Vecteurs__Static__Data_1a957a2b143d97af8d47d2bf69a377f9ea" kindref="member">buf_pointers_</ref>[pe]<sp/>+=<sp/>BLOCSIZE_TID(size);</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/>tmp_area_tid_.ref_data(bufptr,<sp/>size);</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>tmp_area_tid_;</highlight></codeline>
<codeline lineno="252"><highlight class="normal">}</highlight></codeline>
<codeline lineno="253"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal">&lt;&gt;</highlight></codeline>
<codeline lineno="256" refid="classSchema__Comm__Vecteurs_1aff6e8eebc01e06b83574e2312c779c55" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfDouble</ref>&amp;<sp/>Schema_Comm_Vecteurs::get_next_area_template&lt;double&gt;(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size)</highlight></codeline>
<codeline lineno="257"><highlight class="normal">{</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/>ALIGN_SIZE(<ref refid="classSchema__Comm__Vecteurs_1a09a2147eb4b5adfa654bee03e3c18f8a" kindref="member">sdata_</ref>.<ref refid="classSchema__Comm__Vecteurs__Static__Data_1a957a2b143d97af8d47d2bf69a377f9ea" kindref="member">buf_pointers_</ref>[pe],<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/>assert(<ref refid="classSchema__Comm__Vecteurs_1a4b8c1defca657eaaa9aab90c9cedebe3" kindref="member">check_next_area</ref>(pe,<sp/>BLOCSIZE_DOUBLE(size)));</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*bufptr<sp/>=<sp/>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*)<sp/>(<ref refid="classSchema__Comm__Vecteurs_1a09a2147eb4b5adfa654bee03e3c18f8a" kindref="member">sdata_</ref>.<ref refid="classSchema__Comm__Vecteurs__Static__Data_1a957a2b143d97af8d47d2bf69a377f9ea" kindref="member">buf_pointers_</ref>[pe]);</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>attention<sp/>a<sp/>l&apos;arithmetique<sp/>de<sp/>pointeurs,<sp/>ajout<sp/>d&apos;une<sp/>taille<sp/>en<sp/>octets</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1a09a2147eb4b5adfa654bee03e3c18f8a" kindref="member">sdata_</ref>.<ref refid="classSchema__Comm__Vecteurs__Static__Data_1a957a2b143d97af8d47d2bf69a377f9ea" kindref="member">buf_pointers_</ref>[pe]<sp/>+=<sp/>BLOCSIZE_DOUBLE(size);</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1a2fab4d2b9a4370b5be227b0221b5f16b" kindref="member">tmp_area_double_</ref>.<ref refid="classTRUSTArray_1afa24187d1b5c32ef0f2014a8a0bdc24f" kindref="member">ref_data</ref>(bufptr,<sp/>size);</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1a2fab4d2b9a4370b5be227b0221b5f16b" kindref="member">tmp_area_double_</ref>.<ref refid="classTRUSTArray_1ad5dc5796f07a49a1a9f7c2dde29d30fb" kindref="member">set_data_location</ref>(<ref refid="classSchema__Comm__Vecteurs_1a598f70092c4c8b49918560f1c3b6b084" kindref="member">bufferOnDevice_</ref><sp/>?<sp/>DataLocation::Device<sp/>:<sp/>DataLocation::HostOnly);</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(check_comm_vector)</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="267"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>NDEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>en<sp/>debug,<sp/>mettre<sp/>des<sp/>valeurs<sp/>bidon<sp/>dans<sp/>le<sp/>tableau</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classSchema__Comm__Vecteurs_1a9554e2a80041d4a475fe57ca335fd624" kindref="member">status_</ref><sp/>!=<sp/><ref refid="classSchema__Comm__Vecteurs_1af0b3633b2b20429b5d91bc5b13a3fa7fa5e2a97a86e391667109817a944f3df14" kindref="member">EXCHANGED</ref>)</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1a2fab4d2b9a4370b5be227b0221b5f16b" kindref="member">tmp_area_double_</ref><sp/>=<sp/>DMAXFLOAT<sp/>*<sp/>0.999;</highlight></codeline>
<codeline lineno="271"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1a2fab4d2b9a4370b5be227b0221b5f16b" kindref="member">tmp_area_double_</ref>;</highlight></codeline>
<codeline lineno="274"><highlight class="normal">}</highlight></codeline>
<codeline lineno="275"><highlight class="normal"></highlight></codeline>
<codeline lineno="276"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal">&lt;&gt;</highlight></codeline>
<codeline lineno="277" refid="classSchema__Comm__Vecteurs_1ab3d9d06eee42207960f0f723ff3c41bf" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/><ref refid="classTRUSTArray" kindref="compound">ArrOfFloat</ref>&amp;<sp/>Schema_Comm_Vecteurs::get_next_area_template&lt;float&gt;(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>pe,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size)</highlight></codeline>
<codeline lineno="278"><highlight class="normal">{</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/>ALIGN_SIZE(<ref refid="classSchema__Comm__Vecteurs_1a09a2147eb4b5adfa654bee03e3c18f8a" kindref="member">sdata_</ref>.<ref refid="classSchema__Comm__Vecteurs__Static__Data_1a957a2b143d97af8d47d2bf69a377f9ea" kindref="member">buf_pointers_</ref>[pe],<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/>assert(<ref refid="classSchema__Comm__Vecteurs_1a4b8c1defca657eaaa9aab90c9cedebe3" kindref="member">check_next_area</ref>(pe,<sp/>BLOCSIZE_FLOAT(size)));</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*bufptr<sp/>=<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*)<sp/>(<ref refid="classSchema__Comm__Vecteurs_1a09a2147eb4b5adfa654bee03e3c18f8a" kindref="member">sdata_</ref>.<ref refid="classSchema__Comm__Vecteurs__Static__Data_1a957a2b143d97af8d47d2bf69a377f9ea" kindref="member">buf_pointers_</ref>[pe]);</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>attention<sp/>a<sp/>l&apos;arithmetique<sp/>de<sp/>pointeurs,<sp/>ajout<sp/>d&apos;une<sp/>taille<sp/>en<sp/>octets</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1a09a2147eb4b5adfa654bee03e3c18f8a" kindref="member">sdata_</ref>.<ref refid="classSchema__Comm__Vecteurs__Static__Data_1a957a2b143d97af8d47d2bf69a377f9ea" kindref="member">buf_pointers_</ref>[pe]<sp/>+=<sp/>BLOCSIZE_FLOAT(size);</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1a9859acbe7edd237474ed91c00582567c" kindref="member">tmp_area_float_</ref>.<ref refid="classTRUSTArray_1afa24187d1b5c32ef0f2014a8a0bdc24f" kindref="member">ref_data</ref>(bufptr,<sp/>size);</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><ref refid="classSchema__Comm__Vecteurs_1a9859acbe7edd237474ed91c00582567c" kindref="member">tmp_area_float_</ref>.<ref refid="classTRUSTArray_1ad5dc5796f07a49a1a9f7c2dde29d30fb" kindref="member">set_data_location</ref>(<ref refid="classSchema__Comm__Vecteurs_1a598f70092c4c8b49918560f1c3b6b084" kindref="member">bufferOnDevice_</ref><sp/>?<sp/>DataLocation::Device<sp/>:<sp/>DataLocation::HostOnly);</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classSchema__Comm__Vecteurs_1a9859acbe7edd237474ed91c00582567c" kindref="member">tmp_area_float_</ref>;</highlight></codeline>
<codeline lineno="287"><highlight class="normal">}</highlight></codeline>
<codeline lineno="288"><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"></highlight><highlight class="preprocessor">#undef<sp/>BLOCSIZE_INT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"></highlight><highlight class="preprocessor">#undef<sp/>BLOCSIZE_DOUBLE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="291"><highlight class="normal"></highlight><highlight class="preprocessor">#undef<sp/>BLOCSIZE_FLOAT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="292"><highlight class="normal"></highlight></codeline>
<codeline lineno="293"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>Schema_Comm_Vecteurs_included<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
    </programlisting>
    <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Schema_Comm_Vecteurs.h"/>
  </compounddef>
</doxygen>
