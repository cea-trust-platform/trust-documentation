<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.1" xml:lang="en-US">
  <compounddef id="Process_8cpp" kind="file" language="C++">
    <compoundname>Process.cpp</compoundname>
    <includes refid="Process_8h" local="no">Process.h</includes>
    <includes refid="Comm__Group_8h" local="no">Comm_Group.h</includes>
    <includes refid="PE__Groups_8h" local="no">PE_Groups.h</includes>
    <includes refid="communications_8h" local="no">communications.h</includes>
    <includes refid="Sortie__Nulle_8h" local="no">Sortie_Nulle.h</includes>
    <includes refid="Journal_8h" local="no">Journal.h</includes>
    <includes refid="SFichier_8h" local="no">SFichier.h</includes>
    <includes refid="Synonyme__info_8h" local="no">Synonyme_info.h</includes>
    <includes local="no">petsc_for_kernel.h</includes>
    <includes refid="comm__incl_8h" local="no">comm_incl.h</includes>
    <includes refid="TRUST__Error_8h" local="no">TRUST_Error.h</includes>
    <includes refid="Comm__Group__MPI_8h" local="no">Comm_Group_MPI.h</includes>
    <includes local="no">unistd.h</includes>
    <includes refid="SChaine_8h" local="no">SChaine.h</includes>
    <includes refid="FichierHDFPar_8h" local="no">FichierHDFPar.h</includes>
    <includes refid="EChaineJDD_8h" local="no">EChaineJDD.h</includes>
    <includes refid="DeviceMemory_8h" local="no">DeviceMemory.h</includes>
    <includes refid="kokkos_09_09_8h" local="no">kokkos++.h</includes>
    <includes local="no">sys/resource.h</includes>
    <includes local="no">malloc.h</includes>
    <incdepgraph>
      <node id="5">
        <label>malloc.h</label>
      </node>
      <node id="4">
        <label>sys/resource.h</label>
      </node>
      <node id="3">
        <label>unistd.h</label>
      </node>
      <node id="2">
        <label>petsc_for_kernel.h</label>
      </node>
      <node id="1">
        <label>Process.cpp</label>
        <link refid="Process_8cpp"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
    </incdepgraph>
      <sectiondef kind="var">
      <memberdef kind="variable" id="Process_8cpp_1af7a1448e90ec03103467107c5b6a28b2" prot="public" static="yes" mutable="no">
        <type>int</type>
        <definition>int cerr_to_journal_</definition>
        <argsstring></argsstring>
        <name>cerr_to_journal_</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="56" column="19" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="56" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="Process_8cpp_1aaaeccf659eaca329c9aac89f4c8b69cf" prot="public" static="yes" mutable="no">
        <type>int</type>
        <definition>int disable_stop_</definition>
        <argsstring></argsstring>
        <name>disable_stop_</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="52" column="19" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="52" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="Process_8cpp_1ab370fa5859f93f788179c7edc6c66e8e" prot="public" static="yes" mutable="no">
        <type>double</type>
        <definition>double heap_allocated_old</definition>
        <argsstring></argsstring>
        <name>heap_allocated_old</name>
        <initializer>=0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="469" column="15" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="469" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="Process_8cpp_1aad28fe2402c6e76ebd6067160e90fc93" prot="public" static="yes" mutable="no">
        <type><ref refid="classSFichier" kindref="compound">SFichier</ref></type>
        <definition>SFichier journal_file_</definition>
        <argsstring></argsstring>
        <name>journal_file_</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="44" column="21" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="44" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="Process_8cpp_1af8f0a3d68c7eccb5aa8d2670bf42f2f8" prot="public" static="yes" mutable="no">
        <type><ref refid="classNom" kindref="compound">Nom</ref></type>
        <definition>Nom journal_file_name_</definition>
        <argsstring></argsstring>
        <name>journal_file_name_</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="47" column="21" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="47" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="Process_8cpp_1a0bedd9fc7de0543ad8ee1850dd13bc0e" prot="public" static="yes" mutable="no">
        <type>int</type>
        <definition>int journal_file_open_</definition>
        <argsstring></argsstring>
        <name>journal_file_open_</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="46" column="21" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="46" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="Process_8cpp_1a8f080dc02f389a243b1036012df12388" prot="public" static="yes" mutable="no">
        <type><ref refid="classSortie__Nulle" kindref="compound">Sortie_Nulle</ref></type>
        <definition>Sortie_Nulle journal_zero_</definition>
        <argsstring></argsstring>
        <name>journal_zero_</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="38" column="22" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="38" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="Process_8cpp_1a10d7fdf481006c44e06157e815b69634" prot="public" static="yes" mutable="no">
        <type><ref refid="classSortie" kindref="compound">Sortie</ref></type>
        <definition>Sortie std_err_(cerr)</definition>
        <argsstring>(cerr)</argsstring>
        <name>std_err_</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="40" column="22"/>
      </memberdef>
      <memberdef kind="variable" id="Process_8cpp_1a5ee981378b843ae291266a51ee2e1720" prot="public" static="yes" mutable="no">
        <type><ref refid="classSortie" kindref="compound">Sortie</ref></type>
        <definition>Sortie std_out_(cout)</definition>
        <argsstring>(cout)</argsstring>
        <name>std_out_</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="42" column="22"/>
      </memberdef>
      <memberdef kind="variable" id="Process_8cpp_1a52cb2dd29055bdabf9ad37fc8b100ca0" prot="public" static="yes" mutable="no">
        <type>int</type>
        <definition>int verbose_level_</definition>
        <argsstring></argsstring>
        <name>verbose_level_</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="51" column="19" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="51" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="Process_8cpp_1aa796bea8b7b2907564c6e84ab2720a56" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void change_disable_stop</definition>
        <argsstring>(int new_stop)</argsstring>
        <name>change_disable_stop</name>
        <param>
          <type>int</type>
          <declname>new_stop</declname>
        </param>
        <briefdescription>
<para>Affects a new value to disable_stop_ flag (Disable or not the writing of the . </para>
        </briefdescription>
        <detaileddescription>
<para>stop file) </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="628" column="6" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="628" bodyend="631"/>
      </memberdef>
      <memberdef kind="function" id="Process_8cpp_1a656c506f0984a9a9d73441671b7ec93a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void change_journal_level</definition>
        <argsstring>(int level)</argsstring>
        <name>change_journal_level</name>
        <param>
          <type>int</type>
          <declname>level</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="608" column="6" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="608" bodyend="611"/>
      </memberdef>
      <memberdef kind="function" id="Process_8cpp_1a4c8cf6e825a1a83f36e5f67741ebe342" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void end_journal</definition>
        <argsstring>(int verbose_level)</argsstring>
        <name>end_journal</name>
        <param>
          <type>int</type>
          <declname>verbose_level</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="539" column="6" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="539" bodyend="545"/>
      </memberdef>
      <memberdef kind="function" id="Process_8cpp_1a1882b8b2d15c412c0e6ad4995e188c67" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="classSortie" kindref="compound">Sortie</ref> &amp;</type>
        <definition>Sortie&amp; get_Cerr</definition>
        <argsstring>()</argsstring>
        <name>get_Cerr</name>
        <briefdescription>
<para>Renvoie l&apos;objet <ref refid="classSortie" kindref="compound">Sortie</ref> sur lequel seront redirigees les objets ecrits dans Cerr. </para>
        </briefdescription>
        <detaileddescription>
<para>Cela peut etre std_err_ ou journal_file_ </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="552" column="8" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="552" bodyend="570"/>
      </memberdef>
      <memberdef kind="function" id="Process_8cpp_1aa47014da8cd748a7646bd469ece9f82e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="classSortie" kindref="compound">Sortie</ref> &amp;</type>
        <definition>Sortie&amp; get_Cout</definition>
        <argsstring>()</argsstring>
        <name>get_Cout</name>
        <briefdescription>
<para>Si on est sur le maitre, on renvoie cout ou le fichier journal sinon journal_zero_. </para>
        </briefdescription>
        <detaileddescription>
<para><simplesect kind="see"><para>cerr_to_journal_ </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="577" column="8" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="577" bodyend="590"/>
      </memberdef>
      <memberdef kind="function" id="Process_8cpp_1a793f0cea0b470888001917e7bc49d680" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int get_disable_stop</definition>
        <argsstring>()</argsstring>
        <name>get_disable_stop</name>
        <briefdescription>
<para>Returns the disable_stop_ flag (Disable or not the writing of the . </para>
        </briefdescription>
        <detaileddescription>
<para>stop file) </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="618" column="5" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="618" bodyend="621"/>
      </memberdef>
      <memberdef kind="function" id="Process_8cpp_1a315d4fe9ccfb79fb3430ed88a6c68cef" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int get_journal_level</definition>
        <argsstring>()</argsstring>
        <name>get_journal_level</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="603" column="5" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="603" bodyend="606"/>
      </memberdef>
      <memberdef kind="function" id="Process_8cpp_1aa464b357b7ace656a031c39404cd708e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>double</type>
        <definition>double heap_allocation</definition>
        <argsstring>()</argsstring>
        <name>heap_allocation</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="458" column="8" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="458" bodyend="467"/>
      </memberdef>
      <memberdef kind="function" id="Process_8cpp_1a84a54c6f1416dd27d1640968309880fb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void init_journal_file</definition>
        <argsstring>(int verbose_level, const char *file_name, int append)</argsstring>
        <name>init_journal_file</name>
        <param>
          <type>int</type>
          <declname>verbose_level</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>file_name</declname>
        </param>
        <param>
          <type>int</type>
          <declname>append</declname>
        </param>
        <briefdescription>
<para>Initialisation du journal. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>(verbose_level)</parametername>
</parameternamelist>
<parameterdescription>
<para>les messages de niveau &lt;= verbose_level seront affiches, les autres seront mis a la poubelle. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>(file_name)</parametername>
</parameternamelist>
<parameterdescription>
<para>si pointeur nul, tout le monde ecrit dans cerr, sinon c&apos;est le nom du fichier (doit etre different sur chaque processeur) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>(append)</parametername>
</parameternamelist>
<parameterdescription>
<para>indique si on ouvre le fichier en mode append ou pas. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="515" column="6" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="515" bodyend="537"/>
      </memberdef>
      <memberdef kind="function" id="Process_8cpp_1a9648e3f2f3d700b64490b59bb2a88f1d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>double</type>
        <definition>double ru_maxrss</definition>
        <argsstring>()</argsstring>
        <name>ru_maxrss</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="434" column="8" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="434" bodyend="442"/>
      </memberdef>
      <memberdef kind="function" id="Process_8cpp_1a2244ba5308ba2093e63effc4dd4a5fa6" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void set_Cerr_to_journal</definition>
        <argsstring>(int flag)</argsstring>
        <name>set_Cerr_to_journal</name>
        <param>
          <type>int</type>
          <declname>flag</declname>
        </param>
        <briefdescription>
<para>change la destination de Cerr et Cout Si flag=0, c&apos;est stderr et stdout, sinon, si le fichier </para>
        </briefdescription>
        <detaileddescription>
<para>journal est ouvert, c&apos;est le journal, sinon c&apos;est <ref refid="classSortie__Nulle" kindref="compound">Sortie_Nulle</ref> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" line="598" column="6" bodyfile="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp" bodystart="598" bodyend="601"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/****************************************************************************</highlight></codeline>
<codeline lineno="2"><highlight class="comment">*<sp/>Copyright<sp/>(c)<sp/>2025,<sp/>CEA</highlight></codeline>
<codeline lineno="3"><highlight class="comment">*<sp/>All<sp/>rights<sp/>reserved.</highlight></codeline>
<codeline lineno="4"><highlight class="comment">*</highlight></codeline>
<codeline lineno="5"><highlight class="comment">*<sp/>Redistribution<sp/>and<sp/>use<sp/>in<sp/>source<sp/>and<sp/>binary<sp/>forms,<sp/>with<sp/>or<sp/>without<sp/>modification,<sp/>are<sp/>permitted<sp/>provided<sp/>that<sp/>the<sp/>following<sp/>conditions<sp/>are<sp/>met:</highlight></codeline>
<codeline lineno="6"><highlight class="comment">*<sp/>1.<sp/>Redistributions<sp/>of<sp/>source<sp/>code<sp/>must<sp/>retain<sp/>the<sp/>above<sp/>copyright<sp/>notice,<sp/>this<sp/>list<sp/>of<sp/>conditions<sp/>and<sp/>the<sp/>following<sp/>disclaimer.</highlight></codeline>
<codeline lineno="7"><highlight class="comment">*<sp/>2.<sp/>Redistributions<sp/>in<sp/>binary<sp/>form<sp/>must<sp/>reproduce<sp/>the<sp/>above<sp/>copyright<sp/>notice,<sp/>this<sp/>list<sp/>of<sp/>conditions<sp/>and<sp/>the<sp/>following<sp/>disclaimer<sp/>in<sp/>the<sp/>documentation<sp/>and/or<sp/>other<sp/>materials<sp/>provided<sp/>with<sp/>the<sp/>distribution.</highlight></codeline>
<codeline lineno="8"><highlight class="comment">*<sp/>3.<sp/>Neither<sp/>the<sp/>name<sp/>of<sp/>the<sp/>copyright<sp/>holder<sp/>nor<sp/>the<sp/>names<sp/>of<sp/>its<sp/>contributors<sp/>may<sp/>be<sp/>used<sp/>to<sp/>endorse<sp/>or<sp/>promote<sp/>products<sp/>derived<sp/>from<sp/>this<sp/>software<sp/>without<sp/>specific<sp/>prior<sp/>written<sp/>permission.</highlight></codeline>
<codeline lineno="9"><highlight class="comment">*</highlight></codeline>
<codeline lineno="10"><highlight class="comment">*<sp/>THIS<sp/>SOFTWARE<sp/>IS<sp/>PROVIDED<sp/>BY<sp/>THE<sp/>COPYRIGHT<sp/>HOLDERS<sp/>AND<sp/>CONTRIBUTORS<sp/>&quot;AS<sp/>IS&quot;<sp/>AND<sp/>ANY<sp/>EXPRESS<sp/>OR<sp/>IMPLIED<sp/>WARRANTIES,<sp/>INCLUDING,<sp/>BUT<sp/>NOT<sp/>LIMITED<sp/>TO,<sp/>THE<sp/>IMPLIED<sp/>WARRANTIES<sp/>OF<sp/>MERCHANTABILITY<sp/>AND<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR<sp/>PURPOSE<sp/>ARE<sp/>DISCLAIMED.</highlight></codeline>
<codeline lineno="11"><highlight class="comment">*<sp/>IN<sp/>NO<sp/>EVENT<sp/>SHALL<sp/>THE<sp/>COPYRIGHT<sp/>HOLDER<sp/>OR<sp/>CONTRIBUTORS<sp/>BE<sp/>LIABLE<sp/>FOR<sp/>ANY<sp/>DIRECT,<sp/>INDIRECT,<sp/>INCIDENTAL,<sp/>SPECIAL,<sp/>EXEMPLARY,<sp/>OR<sp/>CONSEQUENTIAL<sp/>DAMAGES<sp/>(INCLUDING,<sp/>BUT<sp/>NOT<sp/>LIMITED<sp/>TO,<sp/>PROCUREMENT<sp/>OF<sp/>SUBSTITUTE<sp/>GOODS<sp/>OR<sp/>SERVICES;<sp/>LOSS<sp/>OF<sp/>USE,<sp/>DATA,<sp/>OR<sp/>PROFITS;</highlight></codeline>
<codeline lineno="12"><highlight class="comment">*<sp/>OR<sp/>BUSINESS<sp/>INTERRUPTION)<sp/>HOWEVER<sp/>CAUSED<sp/>AND<sp/>ON<sp/>ANY<sp/>THEORY<sp/>OF<sp/>LIABILITY,<sp/>WHETHER<sp/>IN<sp/>CONTRACT,<sp/>STRICT<sp/>LIABILITY,<sp/>OR<sp/>TORT<sp/>(INCLUDING<sp/>NEGLIGENCE<sp/>OR<sp/>OTHERWISE)<sp/>ARISING<sp/>IN<sp/>ANY<sp/>WAY<sp/>OUT<sp/>OF<sp/>THE<sp/>USE<sp/>OF<sp/>THIS<sp/>SOFTWARE,<sp/>EVEN<sp/>IF<sp/>ADVISED<sp/>OF<sp/>THE<sp/>POSSIBILITY<sp/>OF<sp/>SUCH<sp/>DAMAGE.</highlight></codeline>
<codeline lineno="13"><highlight class="comment">*</highlight></codeline>
<codeline lineno="14"><highlight class="comment">*****************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;Process.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;Comm_Group.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;PE_Groups.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;communications.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;Sortie_Nulle.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;Journal.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;SFichier.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;Synonyme_info.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;petsc_for_kernel.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;comm_incl.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;TRUST_Error.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;Comm_Group_MPI.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;unistd.h&gt;</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">//<sp/>sleep()<sp/>pour<sp/>certaines<sp/>machines</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;SChaine.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;FichierHDFPar.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;EChaineJDD.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;DeviceMemory.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;kokkos++.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Chacun<sp/>des<sp/>fichiers<sp/>Cerr,<sp/>Cout<sp/>et<sp/>Journal(i)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight><highlight class="comment">//<sp/>peut<sp/>etre<sp/>redirige<sp/>vers<sp/>l&apos;un<sp/>des<sp/>quatre<sp/>fichiers<sp/>suivants:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Instance<sp/>de<sp/>la<sp/>Sortie<sp/>nulle<sp/>(equivalent<sp/>de<sp/>/dev/null)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="classSortie__Nulle" kindref="compound">Sortie_Nulle</ref><sp/><sp/>journal_zero_;</highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Instance<sp/>de<sp/>la<sp/>Sortie<sp/>pointant<sp/>vers<sp/>cerr</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="classSortie" kindref="compound">Sortie</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std_err_(cerr);</highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Instance<sp/>de<sp/>la<sp/>Sortie<sp/>pointant<sp/>vers<sp/>cout</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="classSortie" kindref="compound">Sortie</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std_out_(cout);</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Instances<sp/>du<sp/>fichier<sp/>Journal</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="classSFichier" kindref="compound">SFichier</ref><sp/><sp/><sp/><sp/><sp/>journal_file_;</highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>journal_file_open_;</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="classNom" kindref="compound">Nom</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>journal_file_name_;</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Niveau<sp/>maximal<sp/>des<sp/>messages<sp/>ecrits.<sp/>La<sp/>valeur<sp/>initiale<sp/>determine</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="comment">//<sp/>si<sp/>les<sp/>messages<sp/>ecrits<sp/>avant<sp/>l&apos;initialisation<sp/>du<sp/>journal<sp/>sont<sp/>ecrits</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight><highlight class="comment">//<sp/>ou<sp/>pas.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verbose_level_<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>disable_stop_<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Drapeau<sp/>indiquant<sp/>si<sp/>les<sp/>sorties<sp/>cerr<sp/>et<sp/>cout<sp/>doivent</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight><highlight class="comment">//<sp/>etre<sp/>redirigees<sp/>vers<sp/>le<sp/>fichier<sp/>journal</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cerr_to_journal_<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classProcess_1ab0d2cbf9cdb22a0bd75a7e45026f6fc1" kindref="member">Process::exception_sur_exit</ref>=0;</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a1d8a5252b02c0db08e1bea86c7442205" kindref="member">Process::multiple_files</ref>=5120;<sp/></highlight><highlight class="comment">//<sp/>Valeur<sp/>modifiable<sp/>avec<sp/>la<sp/>variable<sp/>d&apos;environnement<sp/>TRUST_MultipleFiles</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59" refid="classProcess_1aaa66d21b3cc2af185606cdf4c5d2c8d8" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classProcess_1aaa66d21b3cc2af185606cdf4c5d2c8d8" kindref="member">Process::force_single_file</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ranks,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classNom" kindref="compound">Nom</ref>&amp;<sp/>filename)</highlight></codeline>
<codeline lineno="60"><highlight class="normal">{</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>theValue<sp/>=<sp/>getenv(</highlight><highlight class="stringliteral">&quot;TRUST_MultipleFiles&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(theValue<sp/>!=<sp/></highlight><highlight class="keyword">nullptr</highlight><highlight class="normal">)<sp/><ref refid="classProcess_1a1d8a5252b02c0db08e1bea86c7442205" kindref="member">multiple_files</ref>=atoi(theValue);</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ranks&gt;<ref refid="classProcess_1a1d8a5252b02c0db08e1bea86c7442205" kindref="member">multiple_files</ref>)</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classProcess_1acd052b99706c577f8a5b6656217cf4c2" kindref="member">Process::je_suis_maitre</ref>())<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Attention,<sp/>necessaire,<sp/>car<sp/>appel<sp/>possible<sp/>tres<sp/>tot<sp/>dans<sp/>main.cpp<sp/>alors<sp/>que<sp/>Cerr<sp/>par<sp/>defini<sp/>completement<sp/>sur<sp/>les<sp/>processes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Cerr<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;======================================================================================================&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>finl;</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Cerr<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Warning!<sp/>Single<sp/>file<sp/>option<sp/>is<sp/>forced<sp/>for<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>filename<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>above<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/><ref refid="classProcess_1a1d8a5252b02c0db08e1bea86c7442205" kindref="member">multiple_files</ref><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>MPI<sp/>ranks.&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>finl;</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Cerr<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;for<sp/>I/O<sp/>performance<sp/>reasons<sp/>on<sp/>cluster<sp/>and<sp/>inodes<sp/>number<sp/>limitation.&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>finl;</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Cerr<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;If<sp/>you<sp/>want<sp/>to<sp/>keep<sp/>multiple<sp/>files,<sp/>add<sp/>at<sp/>the<sp/>beginning<sp/>of<sp/>your<sp/>data<sp/>file<sp/>to<sp/>outpass<sp/>the<sp/>limitation:&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>finl;</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Cerr<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;MultipleFiles<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>ranks<sp/>&lt;&lt;<sp/>finl;</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Cerr<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;=====================================================================================================&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>finl;</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="78"><highlight class="normal">}</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="80"><highlight class="comment">/*!<sp/>@brief<sp/>renvoie<sp/>1<sp/>si<sp/>on<sp/>est<sp/>sur<sp/>le<sp/>processeur<sp/>maitre<sp/>du<sp/>groupe<sp/>courant<sp/>(c&apos;est<sp/>a<sp/>dire<sp/>me()<sp/>==<sp/>0),<sp/>0<sp/>sinon.</highlight></codeline>
<codeline lineno="81"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="82"><highlight class="comment"><sp/>*<sp/>Voir<sp/>Comm_Group::rank()</highlight></codeline>
<codeline lineno="83"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="84"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85" refid="classProcess_1acd052b99706c577f8a5b6656217cf4c2" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classProcess_1acd052b99706c577f8a5b6656217cf4c2" kindref="member">Process::je_suis_maitre</ref>()</highlight></codeline>
<codeline lineno="86"><highlight class="normal">{</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>r<sp/>=<sp/><ref refid="classPE__Groups_1ae6ca0277a58f2ab34ebfb3216578fa75" kindref="member">PE_Groups::current_group</ref>().<ref refid="classComm__Group_1a7fde70af91b6d994aacd10bb4e74aeb8" kindref="member">rank</ref>();</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>r<sp/>==<sp/>0;</highlight></codeline>
<codeline lineno="89"><highlight class="normal">}</highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="91"><highlight class="comment">/*!<sp/>@brief<sp/>renvoie<sp/>1<sp/>si<sp/>on<sp/>est<sp/>sur<sp/>le<sp/>processeur<sp/>maitre<sp/>du<sp/>noeud<sp/>numa,<sp/>0<sp/>sinon.</highlight></codeline>
<codeline lineno="92"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="93"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94" refid="classProcess_1a46ee1e80985418a4414421ed37a87e9a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a46ee1e80985418a4414421ed37a87e9a" kindref="member">Process::node_master</ref>()</highlight></codeline>
<codeline lineno="95"><highlight class="normal">{</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>r<sp/>=<sp/><ref refid="classPE__Groups_1ab3619c7334b2ab4f628c79dd6f15d5e0" kindref="member">PE_Groups::get_node_group</ref>().<ref refid="classComm__Group_1a7fde70af91b6d994aacd10bb4e74aeb8" kindref="member">rank</ref>();</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>r<sp/>==<sp/>0;</highlight></codeline>
<codeline lineno="98"><highlight class="normal">}</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="100"><highlight class="comment">/*!<sp/>@brief<sp/>renvoie<sp/>le<sp/>nombre<sp/>de<sp/>processeurs<sp/>dans<sp/>le<sp/>groupe<sp/>courant<sp/>Voir<sp/>Comm_Group::nproc()<sp/>et<sp/>PE_Groups::current_group()</highlight></codeline>
<codeline lineno="101"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="102"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103" refid="classProcess_1a6bf692ce58d9578aa62ac3c07b8caaa1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a6bf692ce58d9578aa62ac3c07b8caaa1" kindref="member">Process::nproc</ref>()</highlight></codeline>
<codeline lineno="104"><highlight class="normal">{</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>n<sp/>=<sp/><ref refid="classPE__Groups_1ae6ca0277a58f2ab34ebfb3216578fa75" kindref="member">PE_Groups::current_group</ref>().<ref refid="classComm__Group_1a77f7c2af23e60af705eeaeac448dce5d" kindref="member">nproc</ref>();</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>n;</highlight></codeline>
<codeline lineno="107"><highlight class="normal">}</highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight></codeline>
<codeline lineno="109" refid="classProcess_1a48ea49c199fc8961be575e571038b79a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a48ea49c199fc8961be575e571038b79a" kindref="member">Process::is_parallel</ref>()</highlight></codeline>
<codeline lineno="110"><highlight class="normal">{</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a6bf692ce58d9578aa62ac3c07b8caaa1" kindref="member">Process::nproc</ref>()<sp/>&gt;<sp/>1;</highlight></codeline>
<codeline lineno="112"><highlight class="normal">}</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="114" refid="classProcess_1ae3b6cc030ab93d5ea4ba437a4a2455cc" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classProcess_1ae3b6cc030ab93d5ea4ba437a4a2455cc" kindref="member">Process::is_sequential</ref>()</highlight></codeline>
<codeline lineno="115"><highlight class="normal">{</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a6bf692ce58d9578aa62ac3c07b8caaa1" kindref="member">Process::nproc</ref>()<sp/>==<sp/>1;</highlight></codeline>
<codeline lineno="117"><highlight class="normal">}</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="119"><highlight class="comment">/*!<sp/>@brief<sp/>renvoie<sp/>mon<sp/>rang<sp/>dans<sp/>le<sp/>groupe<sp/>de<sp/>communication<sp/>courant.</highlight></codeline>
<codeline lineno="120"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="121"><highlight class="comment"><sp/>*<sp/>Voir<sp/>Comm_Group::rank()<sp/>et<sp/>PE_Groups::current_group()</highlight></codeline>
<codeline lineno="122"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="123"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124" refid="classProcess_1ab55ba07167ec807ed3a145cac0f5dca4" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classProcess_1ab55ba07167ec807ed3a145cac0f5dca4" kindref="member">Process::me</ref>()</highlight></codeline>
<codeline lineno="125"><highlight class="normal">{</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>r<sp/>=<sp/><ref refid="classPE__Groups_1ae6ca0277a58f2ab34ebfb3216578fa75" kindref="member">PE_Groups::current_group</ref>().<ref refid="classComm__Group_1a7fde70af91b6d994aacd10bb4e74aeb8" kindref="member">rank</ref>();</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>r;</highlight></codeline>
<codeline lineno="128"><highlight class="normal">}</highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="130"><highlight class="comment">/*!<sp/>@brief<sp/>Synchronise<sp/>tous<sp/>les<sp/>processeurs<sp/>du<sp/>groupe<sp/>courant<sp/>(attend<sp/>que<sp/>tous<sp/>les<sp/>processeurs<sp/>soient<sp/>arrives<sp/>a<sp/>la<sp/>barriere)</highlight></codeline>
<codeline lineno="131"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="132"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/>Instruction<sp/>a<sp/>executer<sp/>sur<sp/>tous<sp/>les<sp/>processeurs<sp/>du<sp/>groupe.</highlight></codeline>
<codeline lineno="133"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="134"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="135" refid="classProcess_1aa9e74a5c06a68ea38298a08ea401e7b1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classProcess_1aa9e74a5c06a68ea38298a08ea401e7b1" kindref="member">Process::barrier</ref>()</highlight></codeline>
<codeline lineno="136"><highlight class="normal">{</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><ref refid="classPE__Groups_1ae6ca0277a58f2ab34ebfb3216578fa75" kindref="member">PE_Groups::current_group</ref>().<ref refid="classComm__Group_1ac20236e71fc50066d225761ba1349c69" kindref="member">barrier</ref>(0);</highlight></codeline>
<codeline lineno="138"><highlight class="normal">}</highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="141"><highlight class="comment">/*!<sp/>@brief<sp/>Calcule<sp/>la<sp/>somme<sp/>de<sp/>x<sp/>sur<sp/>tous<sp/>les<sp/>processeurs<sp/>du<sp/>groupe<sp/>courant.</highlight></codeline>
<codeline lineno="142"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="143"><highlight class="comment"><sp/>*<sp/>@sa<sp/>mp_max()</highlight></codeline>
<codeline lineno="144"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="145" refid="classProcess_1a7d23bc1ef94b3f0623fbc79d034c27fd" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a7d23bc1ef94b3f0623fbc79d034c27fd" kindref="member">Process::mp_sum</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>x)</highlight></codeline>
<codeline lineno="146"><highlight class="normal">{</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classComm__Group" kindref="compound">Comm_Group</ref>&amp;<sp/>grp<sp/>=<sp/><ref refid="classPE__Groups_1ae6ca0277a58f2ab34ebfb3216578fa75" kindref="member">PE_Groups::current_group</ref>();</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>y;</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/>grp.<ref refid="classComm__Group_1abe4ac5fc38da03874333ddf9f4af5fa7" kindref="member">mp_collective_op</ref>(&amp;x,<sp/>&amp;y,<sp/>1,<sp/><ref refid="classComm__Group_1a16a3e8b4b57b4ac0ee1d237b4a7e302ca55879cc8c9d3898570abc1279177d330" kindref="member">Comm_Group::COLL_SUM</ref>);</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>y;</highlight></codeline>
<codeline lineno="151"><highlight class="normal">}</highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight></codeline>
<codeline lineno="153" refid="classProcess_1a1bd6c62549c06722827ff03cc4390665" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a7d23bc1ef94b3f0623fbc79d034c27fd" kindref="member">Process::mp_sum</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>x)</highlight></codeline>
<codeline lineno="154"><highlight class="normal">{</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classComm__Group" kindref="compound">Comm_Group</ref>&amp;<sp/>grp<sp/>=<sp/><ref refid="classPE__Groups_1ae6ca0277a58f2ab34ebfb3216578fa75" kindref="member">PE_Groups::current_group</ref>();</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>y;</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/>grp.<ref refid="classComm__Group_1abe4ac5fc38da03874333ddf9f4af5fa7" kindref="member">mp_collective_op</ref>(&amp;x,<sp/>&amp;y,<sp/>1,<sp/><ref refid="classComm__Group_1a16a3e8b4b57b4ac0ee1d237b4a7e302ca55879cc8c9d3898570abc1279177d330" kindref="member">Comm_Group::COLL_SUM</ref>);</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>y;</highlight></codeline>
<codeline lineno="159"><highlight class="normal">}</highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="161"><highlight class="comment">/*!<sp/>@brief<sp/>Calcule<sp/>la<sp/>somme<sp/>de<sp/>x<sp/>sur<sp/>tous<sp/>les<sp/>processeurs<sp/>du<sp/>groupe<sp/>courant.</highlight></codeline>
<codeline lineno="162"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="163"><highlight class="comment"><sp/>*<sp/>!!!<sp/>Note<sp/>that<sp/>the<sp/>sum<sp/>of<sp/>many<sp/>int<sp/>might<sp/>result<sp/>in<sp/>a<sp/>long<sp/>!!!</highlight></codeline>
<codeline lineno="164"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="165"><highlight class="comment"><sp/>*<sp/>@sa<sp/>mp_max()</highlight></codeline>
<codeline lineno="166"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="167" refid="classProcess_1a88715611d49ceb0da6e235607c984e27" refkind="member"><highlight class="normal">trustIdType<sp/><ref refid="classProcess_1a7d23bc1ef94b3f0623fbc79d034c27fd" kindref="member">Process::mp_sum</ref>(trustIdType<sp/>x)</highlight></codeline>
<codeline lineno="168"><highlight class="normal">{</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classComm__Group" kindref="compound">Comm_Group</ref>&amp;<sp/>grp<sp/>=<sp/><ref refid="classPE__Groups_1ae6ca0277a58f2ab34ebfb3216578fa75" kindref="member">PE_Groups::current_group</ref>();</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/>trustIdType<sp/>y;</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/>grp.<ref refid="classComm__Group_1abe4ac5fc38da03874333ddf9f4af5fa7" kindref="member">mp_collective_op</ref>(&amp;x,<sp/>&amp;y,<sp/>1,<sp/><ref refid="classComm__Group_1a16a3e8b4b57b4ac0ee1d237b4a7e302ca55879cc8c9d3898570abc1279177d330" kindref="member">Comm_Group::COLL_SUM</ref>);</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>y;</highlight></codeline>
<codeline lineno="173"><highlight class="normal">}</highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight></codeline>
<codeline lineno="175"><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight><highlight class="keyword">namespace</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal">{</highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal"><sp/>&lt;</highlight><highlight class="keyword">typename</highlight><highlight class="normal"><sp/>T&gt;</highlight></codeline>
<codeline lineno="180"><highlight class="normal">T<sp/>mp_operations_commun_(T<sp/>x,<sp/><ref refid="classComm__Group_1a16a3e8b4b57b4ac0ee1d237b4a7e302c" kindref="member">Comm_Group::Collective_Op</ref><sp/>op)</highlight></codeline>
<codeline lineno="181"><highlight class="normal">{</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classComm__Group" kindref="compound">Comm_Group</ref>&amp;<sp/>grp<sp/>=<sp/><ref refid="classPE__Groups_1ae6ca0277a58f2ab34ebfb3216578fa75" kindref="member">PE_Groups::current_group</ref>();</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/>T<sp/>y;</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/>grp.<ref refid="classComm__Group_1abe4ac5fc38da03874333ddf9f4af5fa7" kindref="member">mp_collective_op</ref>(&amp;x,<sp/>&amp;y,<sp/>1,<sp/>op);</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>y;</highlight></codeline>
<codeline lineno="186"><highlight class="normal">}</highlight></codeline>
<codeline lineno="187"><highlight class="normal">}</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="189"><highlight class="comment">/*!<sp/>@brief<sp/>renvoie<sp/>le<sp/>plus<sp/>grand<sp/>int<sp/>i<sp/>sur<sp/>l&apos;ensemble<sp/>des<sp/>processeurs<sp/>du<sp/>groupe<sp/>courant.</highlight></codeline>
<codeline lineno="190"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="191"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="192" refid="classProcess_1ab6a025d5001c1600f2f5ecec2b892881" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a1e9d9f9899b71927cfafae14c7bd048d" kindref="member">Process::mp_max</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>x)<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>mp_operations_commun_(x,<ref refid="classComm__Group_1a16a3e8b4b57b4ac0ee1d237b4a7e302ca97e266ea06542559109eef5e5d642b86" kindref="member">Comm_Group::COLL_MAX</ref>);<sp/>}</highlight></codeline>
<codeline lineno="193" refid="classProcess_1a1e9d9f9899b71927cfafae14c7bd048d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a1e9d9f9899b71927cfafae14c7bd048d" kindref="member">Process::mp_max</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>x)<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>mp_operations_commun_(x,<ref refid="classComm__Group_1a16a3e8b4b57b4ac0ee1d237b4a7e302ca97e266ea06542559109eef5e5d642b86" kindref="member">Comm_Group::COLL_MAX</ref>);<sp/>}</highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>INT_is_64_<sp/>==<sp/>2</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal">trustIdType<sp/><ref refid="classProcess_1a1e9d9f9899b71927cfafae14c7bd048d" kindref="member">Process::mp_max</ref>(trustIdType<sp/>x)<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>mp_operations_commun_(x,<ref refid="classComm__Group_1a16a3e8b4b57b4ac0ee1d237b4a7e302ca97e266ea06542559109eef5e5d642b86" kindref="member">Comm_Group::COLL_MAX</ref>);<sp/>}</highlight></codeline>
<codeline lineno="196"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="199"><highlight class="comment">/*!<sp/>@brief<sp/>renvoie<sp/>le<sp/>plus<sp/>petit<sp/>int<sp/>i<sp/>sur<sp/>l&apos;ensemble<sp/>des<sp/>processeurs<sp/>du<sp/>groupe<sp/>courant.</highlight></codeline>
<codeline lineno="200"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="201"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202" refid="classProcess_1a07108fc4083956693f38f7c3c49d6a06" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a05de57db7288d95f9e67046af585d5ff" kindref="member">Process::mp_min</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>x)<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>mp_operations_commun_(x,<ref refid="classComm__Group_1a16a3e8b4b57b4ac0ee1d237b4a7e302cac56938ec8d65390f71357f084c9be49f" kindref="member">Comm_Group::COLL_MIN</ref>);<sp/>}</highlight></codeline>
<codeline lineno="203" refid="classProcess_1a05de57db7288d95f9e67046af585d5ff" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a05de57db7288d95f9e67046af585d5ff" kindref="member">Process::mp_min</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>x)<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>mp_operations_commun_(x,<ref refid="classComm__Group_1a16a3e8b4b57b4ac0ee1d237b4a7e302cac56938ec8d65390f71357f084c9be49f" kindref="member">Comm_Group::COLL_MIN</ref>);<sp/>}</highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>INT_is_64_<sp/>==<sp/>2</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal">trustIdType<sp/><ref refid="classProcess_1a05de57db7288d95f9e67046af585d5ff" kindref="member">Process::mp_min</ref>(trustIdType<sp/>x)<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>mp_operations_commun_(x,<ref refid="classComm__Group_1a16a3e8b4b57b4ac0ee1d237b4a7e302cac56938ec8d65390f71357f084c9be49f" kindref="member">Comm_Group::COLL_MIN</ref>);<sp/>}</highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="208"><highlight class="comment">/*!<sp/>@brief<sp/>Calul<sp/>de<sp/>la<sp/>somme<sp/>partielle<sp/>de<sp/>i<sp/>sur<sp/>les<sp/>processeurs<sp/>0<sp/>a<sp/>me()-1<sp/>(renvoie<sp/>0<sp/>sur<sp/>le<sp/>processeur<sp/>0).</highlight></codeline>
<codeline lineno="209"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="210"><highlight class="comment"><sp/>*<sp/>Voir<sp/>Comm_Group::mppartial_sum()</highlight></codeline>
<codeline lineno="211"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="212"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="213" refid="classProcess_1a1b4bf5eb9e582f28244860df2c314d23" refkind="member"><highlight class="normal">trustIdType<sp/><ref refid="classProcess_1a1b4bf5eb9e582f28244860df2c314d23" kindref="member">Process::mppartial_sum</ref>(trustIdType<sp/>x)</highlight></codeline>
<codeline lineno="214"><highlight class="normal">{</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classComm__Group" kindref="compound">Comm_Group</ref>&amp;<sp/>grp<sp/>=<sp/><ref refid="classPE__Groups_1ae6ca0277a58f2ab34ebfb3216578fa75" kindref="member">PE_Groups::current_group</ref>();</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/>trustIdType<sp/>xx<sp/>=<sp/>x;</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/>trustIdType<sp/>y;</highlight></codeline>
<codeline lineno="218"><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/>grp.<ref refid="classComm__Group_1abe4ac5fc38da03874333ddf9f4af5fa7" kindref="member">mp_collective_op</ref>(&amp;xx,<sp/>&amp;y,<sp/>1,<sp/><ref refid="classComm__Group_1a16a3e8b4b57b4ac0ee1d237b4a7e302ca31173cff9138da25f8a6f87612e14edb" kindref="member">Comm_Group::COLL_PARTIAL_SUM</ref>);</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>y;</highlight></codeline>
<codeline lineno="221"><highlight class="normal">}</highlight></codeline>
<codeline lineno="222"><highlight class="normal"></highlight></codeline>
<codeline lineno="223" refid="classProcess_1a463f835a6ba5234444e73d5ebffa684a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a463f835a6ba5234444e73d5ebffa684a" kindref="member">Process::mpsum_multiple</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">&amp;<sp/>x1,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal">&amp;<sp/>x2)</highlight></codeline>
<codeline lineno="224"><highlight class="normal">{</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classComm__Group" kindref="compound">Comm_Group</ref>&amp;<sp/>grp<sp/>=<sp/><ref refid="classPE__Groups_1ae6ca0277a58f2ab34ebfb3216578fa75" kindref="member">PE_Groups::current_group</ref>();</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>x[2];</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>y[2];</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/>x[0]<sp/>=<sp/>x1;</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/>x[1]<sp/>=<sp/>x2;</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/>grp.<ref refid="classComm__Group_1abe4ac5fc38da03874333ddf9f4af5fa7" kindref="member">mp_collective_op</ref>(x,<sp/>y,<sp/>2,<sp/><ref refid="classComm__Group_1a16a3e8b4b57b4ac0ee1d237b4a7e302ca55879cc8c9d3898570abc1279177d330" kindref="member">Comm_Group::COLL_SUM</ref>);</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/>x1<sp/>=<sp/>y[0];</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/>x2<sp/>=<sp/>y[1];</highlight></codeline>
<codeline lineno="233"><highlight class="normal">}</highlight></codeline>
<codeline lineno="234"><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="236"><highlight class="comment">/*!<sp/>@brief<sp/>Calcule<sp/>le<sp/>&apos;et&apos;<sp/>logique<sp/>de<sp/>b<sp/>sur<sp/>tous<sp/>les<sp/>processeurs<sp/>du<sp/>groupe<sp/>courant.</highlight></codeline>
<codeline lineno="237"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="238"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="239" refid="classProcess_1aeaa5f9b4e42dc41414bebc7df14e16f6" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classProcess_1aeaa5f9b4e42dc41414bebc7df14e16f6" kindref="member">Process::mp_and</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>b)</highlight></codeline>
<codeline lineno="240"><highlight class="normal">{</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classComm__Group" kindref="compound">Comm_Group</ref>&amp;<sp/>grp<sp/>=<sp/><ref refid="classPE__Groups_1ae6ca0277a58f2ab34ebfb3216578fa75" kindref="member">PE_Groups::current_group</ref>();</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>x<sp/>=<sp/>b<sp/>?<sp/>1<sp/>:<sp/>0;</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y;</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/>grp.<ref refid="classComm__Group_1abe4ac5fc38da03874333ddf9f4af5fa7" kindref="member">mp_collective_op</ref>(&amp;x,<sp/>&amp;y,<sp/>1,<sp/><ref refid="classComm__Group_1a16a3e8b4b57b4ac0ee1d237b4a7e302cac56938ec8d65390f71357f084c9be49f" kindref="member">Comm_Group::COLL_MIN</ref>);</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>y<sp/>==<sp/>1;</highlight></codeline>
<codeline lineno="246"><highlight class="normal">}</highlight></codeline>
<codeline lineno="247"><highlight class="normal"></highlight></codeline>
<codeline lineno="248" refid="classProcess_1a3edf8f2af6203e232bb76660630a0de9" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a3edf8f2af6203e232bb76660630a0de9" kindref="member">Process::mp_or</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>b)</highlight></codeline>
<codeline lineno="249"><highlight class="normal">{</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classComm__Group" kindref="compound">Comm_Group</ref>&amp;<sp/>grp<sp/>=<sp/><ref refid="classPE__Groups_1ae6ca0277a58f2ab34ebfb3216578fa75" kindref="member">PE_Groups::current_group</ref>();</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>x<sp/>=<sp/>b<sp/>?<sp/>1<sp/>:<sp/>0;</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y;</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/>grp.<ref refid="classComm__Group_1abe4ac5fc38da03874333ddf9f4af5fa7" kindref="member">mp_collective_op</ref>(&amp;x,<sp/>&amp;y,<sp/>1,<sp/><ref refid="classComm__Group_1a16a3e8b4b57b4ac0ee1d237b4a7e302ca97e266ea06542559109eef5e5d642b86" kindref="member">Comm_Group::COLL_MAX</ref>);</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>y<sp/>==<sp/>1;</highlight></codeline>
<codeline lineno="255"><highlight class="normal">}</highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"></highlight></codeline>
<codeline lineno="258" refid="classProcess_1a122c4f1afb9ac78c4cb2dd392b498d6f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a122c4f1afb9ac78c4cb2dd392b498d6f" kindref="member">Process::check_int_overflow</ref>(trustIdType<sp/>v)</highlight></codeline>
<codeline lineno="259"><highlight class="normal">{</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(v<sp/>&gt;=<sp/>std::numeric_limits&lt;int&gt;::max())</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classProcess_1acc2fbbe761e08e5870ae605c0705491c" kindref="member">Process::exit</ref>(</highlight><highlight class="stringliteral">&quot;Value<sp/>too<sp/>big<sp/>-<sp/>above<sp/>32b<sp/>and<sp/>can<sp/>not<sp/>be<sp/>converted<sp/>to<sp/>int!!&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="keywordtype">int</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(v);</highlight></codeline>
<codeline lineno="263"><highlight class="normal">}</highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="265"><highlight class="comment">/*!<sp/>@brief<sp/>Routine<sp/>de<sp/>sortie<sp/>de<sp/>TRUST<sp/>dans<sp/>une<sp/>region<sp/>Kokkos</highlight></codeline>
<codeline lineno="266"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="267"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="269"><highlight class="comment">KOKKOS_FUNCTION</highlight></codeline>
<codeline lineno="270"><highlight class="comment">void<sp/>Process::Kokkos_exit(const<sp/>char*<sp/>str)</highlight></codeline>
<codeline lineno="271"><highlight class="comment">{</highlight></codeline>
<codeline lineno="272"><highlight class="comment">#ifdef<sp/>TRUST_USE_GPU</highlight></codeline>
<codeline lineno="273"><highlight class="comment"><sp/>//<sp/>ToDo<sp/>Kokkos:<sp/>try<sp/>to<sp/>exit<sp/>more<sp/>properly<sp/>on<sp/>device...</highlight></codeline>
<codeline lineno="274"><highlight class="comment"><sp/>Kokkos::abort(str);</highlight></codeline>
<codeline lineno="275"><highlight class="comment"><sp/>//Kokkos::finalize();</highlight></codeline>
<codeline lineno="276"><highlight class="comment">#else</highlight></codeline>
<codeline lineno="277"><highlight class="comment"><sp/><sp/><sp/><sp/>Process::exit(str);</highlight></codeline>
<codeline lineno="278"><highlight class="comment">#endif</highlight></codeline>
<codeline lineno="279"><highlight class="comment">}*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="281"><highlight class="comment">/*!<sp/>@brief<sp/>Routine<sp/>de<sp/>sortie<sp/>de<sp/>TRUST<sp/>sur<sp/>une<sp/>erreur.</highlight></codeline>
<codeline lineno="282"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="283"><highlight class="comment"><sp/>*<sp/>Sauvegarde<sp/>la<sp/>memoire<sp/>et<sp/>de<sp/>la<sp/>hierarchie<sp/>dans<sp/>les<sp/>fichiers<sp/>&quot;memoire.dump&quot;<sp/>et<sp/>&quot;hierarchie.dump&quot;</highlight></codeline>
<codeline lineno="284"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="285" refid="classProcess_1acc2fbbe761e08e5870ae605c0705491c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classProcess_1acc2fbbe761e08e5870ae605c0705491c" kindref="member">Process::exit</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i)</highlight></codeline>
<codeline lineno="286"><highlight class="normal">{</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><ref refid="classNom" kindref="compound">Nom</ref><sp/>message=</highlight><highlight class="stringliteral">&quot;=========================================\nTRUST<sp/>has<sp/>caused<sp/>an<sp/>error<sp/>and<sp/>will<sp/>stop.\nUnexpected<sp/>error<sp/>during<sp/>TRUST<sp/>calculation.&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/>std::string<sp/>jddLine<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;\nError<sp/>triggered<sp/>at<sp/>line<sp/>&quot;</highlight><highlight class="normal"><sp/>+<sp/>std::to_string(<ref refid="classEChaineJDD_1a089c783d1b46d83fa56a5654688b717c" kindref="member">EChaineJDD::file_cur_line_</ref>)<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;<sp/>in<sp/>&quot;</highlight><highlight class="normal"><sp/>+<sp/><ref refid="classObjet__U_1a7c27c4f80259eeef76ff8fe2d3bc61f7" kindref="member">Objet_U::nom_du_cas</ref>().<ref refid="classNom_1a48e315ae2bd7856306802f9de2a13e52" kindref="member">getString</ref>()<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;.data&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/>message+=jddLine;</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><ref refid="classProcess_1acc2fbbe761e08e5870ae605c0705491c" kindref="member">exit</ref>(message,i);</highlight></codeline>
<codeline lineno="291"><highlight class="normal">}</highlight></codeline>
<codeline lineno="292" refid="classProcess_1aaa53d327405713fe4c44ee70fdcd7d69" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classProcess_1acc2fbbe761e08e5870ae605c0705491c" kindref="member">Process::exit</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classNom" kindref="compound">Nom</ref>&amp;<sp/>message<sp/>,</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i)</highlight></codeline>
<codeline lineno="293"><highlight class="normal">{</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classProcess_1ab0d2cbf9cdb22a0bd75a7e45026f6fc1" kindref="member">exception_sur_exit</ref><sp/>==<sp/>2)</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classProcess_1acc2fbbe761e08e5870ae605c0705491c" kindref="member">::exit</ref>(-1);<sp/></highlight><highlight class="comment">//<sp/>ND<sp/>11/01/23<sp/>utilisation<sp/>d&apos;un<sp/>second<sp/>::exit(-1)<sp/>dans<sp/>TRUST<sp/>car<sp/>si<sp/>pas<sp/>droits<sp/>d&apos;ecriture<sp/>appel<sp/>recursif<sp/>a<sp/>Process::exit()</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="298"><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="classProcess_1acd052b99706c577f8a5b6656217cf4c2" kindref="member">je_suis_maitre</ref>())</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Cerr<sp/>&lt;&lt;<sp/>message<sp/>&lt;&lt;<sp/>finl;</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Cerr.flush();</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Utile<sp/>pour<sp/>XData<sp/>et<sp/>la<sp/>creation<sp/>de<sp/>syno.py</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(getenv(</highlight><highlight class="stringliteral">&quot;TRUST_USE_XDATA&quot;</highlight><highlight class="normal">)!=</highlight><highlight class="keyword">nullptr</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classSFichier" kindref="compound">SFichier</ref><sp/>hier(</highlight><highlight class="stringliteral">&quot;hierarchie.dump&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hier<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;\n<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>KEYWORDS\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classType__info_1aad48b1f59d3d7b01ce0cfe4592282fda" kindref="member">Type_info::hierarchie</ref>(hier);</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hier<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;\n<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SYNONYMS\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classSynonyme__info_1ad816ebead22b577c8eb65dd60ba9d4f7" kindref="member">Synonyme_info::hierarchie</ref>(hier);</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!get_disable_stop()<sp/>&amp;&amp;<sp/><ref refid="classProcess_1acd052b99706c577f8a5b6656217cf4c2" kindref="member">Process::je_suis_maitre</ref>())</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classNom" kindref="compound">Nom</ref><sp/>nomfic(<sp/><ref refid="classObjet__U_1a7c27c4f80259eeef76ff8fe2d3bc61f7" kindref="member">Objet_U::nom_du_cas</ref>()<sp/>);</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nomfic<sp/>+=<sp/></highlight><highlight class="stringliteral">&quot;.stop&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classSFichier" kindref="compound">SFichier</ref><sp/>ficstop(<sp/>nomfic<sp/>);</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ficstop<sp/>&lt;&lt;message&lt;&lt;finl;</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><ref refid="classProcess_1a57e0f54b11e6eaadbea224fa904b18dd" kindref="member">Journal</ref>()<sp/>&lt;&lt;<sp/>message<sp/>&lt;&lt;<sp/>finl;</highlight></codeline>
<codeline lineno="323"><highlight class="normal"></highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classProcess_1ab0d2cbf9cdb22a0bd75a7e45026f6fc1" kindref="member">exception_sur_exit</ref>)</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Lancement<sp/>d&apos;une<sp/>exception<sp/>(utilise<sp/>par<sp/>Execute_parallel)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/><ref refid="classTRUST__Error" kindref="compound">TRUST_Error</ref>(</highlight><highlight class="stringliteral">&quot;Error<sp/>in<sp/>trust<sp/>&quot;</highlight><highlight class="normal">,<ref refid="classProcess_1ab55ba07167ec807ed3a145cac0f5dca4" kindref="member">Process::me</ref>());</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a6a4b64571b10f150a70db229b839e881" kindref="member">abort</ref>=0;</highlight></codeline>
<codeline lineno="332"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>MPI_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classProcess_1a48ea49c199fc8961be575e571038b79a" kindref="member">Process::is_parallel</ref>())</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>user<sp/>defined<sp/>groups<sp/>(if<sp/>any<sp/>!)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classPE__Groups_1ab48e220fe4c1b29f08979bc36273afb8" kindref="member">PE_Groups::has_user_defined_group</ref>())</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal">&amp;<sp/>grp<sp/>=<sp/><ref refid="classPE__Groups_1aaf3d2976e48df0b913d3d9d65b372a13" kindref="member">PE_Groups::get_user_defined_group</ref>();</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sub_type(<ref refid="classComm__Group__MPI" kindref="compound">Comm_Group_MPI</ref>,grp))</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ref_cast_non_const(<ref refid="classComm__Group__MPI" kindref="compound">Comm_Group_MPI</ref>,grp).free_all();<sp/></highlight><highlight class="comment">//<sp/>free<sp/>comm<sp/>+<sp/>group</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="342"><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>MPI_Comm&amp;<sp/>mpi_comm=ref_cast(<ref refid="classComm__Group__MPI" kindref="compound">Comm_Group_MPI</ref>,<ref refid="classPE__Groups_1af38ed6631e572dc5117361b3f26a47a3" kindref="member">PE_Groups::groupe_TRUST</ref>()).get_mpi_comm();</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>tag<sp/>=<sp/>666;</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>buffer[1]=<sp/>{1};</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MPI_Request<sp/>request;</highlight></codeline>
<codeline lineno="347"><highlight class="normal"></highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Envoi<sp/>non<sp/>bloquant<sp/>vers<sp/>me()+1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>to_pe<sp/>=<sp/>(<ref refid="classProcess_1ab55ba07167ec807ed3a145cac0f5dca4" kindref="member">me</ref>()==<ref refid="classProcess_1a6bf692ce58d9578aa62ac3c07b8caaa1" kindref="member">nproc</ref>()-1?0:<ref refid="classProcess_1ab55ba07167ec807ed3a145cac0f5dca4" kindref="member">me</ref>()+1);</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MPI_Isend(buffer,<sp/>1,<sp/>MPI_ENTIER,<sp/>to_pe,<sp/>tag,<sp/>mpi_comm,<sp/>&amp;request);</highlight></codeline>
<codeline lineno="351"><highlight class="normal"></highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Reception<sp/>non<sp/>bloquante<sp/>depuis<sp/>me()-1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>from_pe<sp/>=<sp/>(<ref refid="classProcess_1ab55ba07167ec807ed3a145cac0f5dca4" kindref="member">me</ref>()==0?<ref refid="classProcess_1a6bf692ce58d9578aa62ac3c07b8caaa1" kindref="member">nproc</ref>()-1:<ref refid="classProcess_1ab55ba07167ec807ed3a145cac0f5dca4" kindref="member">me</ref>()-1);</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MPI_Irecv(buffer,<sp/>1,<sp/>MPI_ENTIER,<sp/>from_pe,<sp/>tag,<sp/>mpi_comm,<sp/>&amp;request);</highlight></codeline>
<codeline lineno="355"><highlight class="normal"></highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Attente</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep(1);</highlight></codeline>
<codeline lineno="358"><highlight class="normal"></highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>si<sp/>me()<sp/>a<sp/>recu<sp/>de<sp/>me()-1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>True_int<sp/>ok;</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MPI_Status<sp/>status;</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MPI_Test(&amp;request,&amp;ok,&amp;status);</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!ok)</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classProcess_1a6a4b64571b10f150a70db229b839e881" kindref="member">abort</ref>=1;</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="366"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classProcess_1a6a4b64571b10f150a70db229b839e881" kindref="member">abort</ref>)</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="classProcess_1acd052b99706c577f8a5b6656217cf4c2" kindref="member">je_suis_maitre</ref>())</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std_err_<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;!!!<sp/>TRUST<sp/>process<sp/>number<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/><ref refid="classProcess_1ab55ba07167ec807ed3a145cac0f5dca4" kindref="member">Process::me</ref>()<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>exited<sp/>unexpectedly<sp/>!<sp/>See<sp/>error<sp/>message<sp/>at<sp/>the<sp/>end<sp/>of<sp/>the<sp/>file<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>journal_file_name_<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>-&gt;<sp/>Aborting<sp/>calculation...&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>finl;</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classPE__Groups_1af38ed6631e572dc5117361b3f26a47a3" kindref="member">PE_Groups::groupe_TRUST</ref>().<ref refid="classComm__Group_1a9eaa1dfaa2f51ddd7d72da0e7bc4f3d2" kindref="member">abort</ref>();</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="377"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>MPI_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MPI_Finalize();</highlight></codeline>
<codeline lineno="379"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classPE__Groups_1a711ec244f2a93cc54863f63053a5bdd8" kindref="member">PE_Groups::finalize</ref>();</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Kokkos::finalize();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>On<sp/>force<sp/>exit();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(i==0)<sp/>i=-1;</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><ref refid="classProcess_1acc2fbbe761e08e5870ae605c0705491c" kindref="member">::exit</ref>(i);<sp/></highlight><highlight class="comment">//Seul<sp/>::exit<sp/>utilise<sp/>dans<sp/>le<sp/>code<sp/>jusqu&apos;a<sp/>01/23.<sp/>second<sp/>ajoute<sp/>car<sp/>appel<sp/>recursif<sp/>a<sp/>Process::exit<sp/>si<sp/>droits<sp/>ecriture<sp/>dossier<sp/>etude<sp/>manquants</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="387"><highlight class="normal">}</highlight></codeline>
<codeline lineno="388"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="389"><highlight class="comment">/*!<sp/>@brief<sp/>Routine<sp/>de<sp/>sortie<sp/>de<sp/>Trio-U<sp/>sur<sp/>une<sp/>erreur<sp/>abort()</highlight></codeline>
<codeline lineno="390"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="391"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="392" refid="classProcess_1a6a4b64571b10f150a70db229b839e881" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a6a4b64571b10f150a70db229b839e881" kindref="member">Process::abort</ref>()</highlight></codeline>
<codeline lineno="393"><highlight class="normal">{</highlight></codeline>
<codeline lineno="394"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>NDEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>En<sp/>optimise<sp/>on<sp/>sort<sp/>proprement.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><ref refid="classProcess_1acc2fbbe761e08e5870ae605c0705491c" kindref="member">exit</ref>();</highlight></codeline>
<codeline lineno="397"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>En<sp/>debug,<sp/>on<sp/>sort<sp/>brutal<sp/>pour<sp/>avoir<sp/>des<sp/>infos<sp/>avec<sp/>le<sp/>debugger<sp/>?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><ref refid="classProcess_1a6a4b64571b10f150a70db229b839e881" kindref="member">::abort</ref>();<sp/></highlight><highlight class="comment">//Seul<sp/>::abort()<sp/>utilise<sp/>dans<sp/>le<sp/>code</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="400"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="401"><highlight class="normal">}</highlight></codeline>
<codeline lineno="402"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="403"><highlight class="comment">/*!<sp/>@brief<sp/>Renvoie<sp/>un<sp/>objet<sp/>statique<sp/>de<sp/>type<sp/>Sortie<sp/>qui<sp/>sert<sp/>de<sp/>journal<sp/>d&apos;evenements.</highlight></codeline>
<codeline lineno="404"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="405"><highlight class="comment"><sp/>*<sp/>Si<sp/>message_level<sp/>&lt;=<sp/>verbose_level_,<sp/>on<sp/>ecrit<sp/>le<sp/>message,<sp/>sinon</highlight></codeline>
<codeline lineno="406"><highlight class="comment"><sp/>*<sp/><sp/><sp/>on<sp/>l&apos;envoie<sp/>sur<sp/>une<sp/>Sortie_Nulle.</highlight></codeline>
<codeline lineno="407"><highlight class="comment"><sp/>*<sp/><sp/><sp/>Si<sp/>le<sp/>fichier<sp/>journal<sp/>est<sp/>ouvert,<sp/>on<sp/>ecrit<sp/>dans<sp/>le<sp/>fichier,<sp/>sinon<sp/>dans<sp/>stderr.</highlight></codeline>
<codeline lineno="408"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="409"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="410" refid="classProcess_1a57e0f54b11e6eaadbea224fa904b18dd" refkind="member"><highlight class="normal"><ref refid="classSortie" kindref="compound">Sortie</ref>&amp;<sp/><ref refid="classProcess_1a57e0f54b11e6eaadbea224fa904b18dd" kindref="member">Process::Journal</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>message_level)</highlight></codeline>
<codeline lineno="411"><highlight class="normal">{</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(message_level<sp/>&lt;=<sp/>verbose_level_<sp/>&amp;&amp;<sp/>verbose_level_<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(journal_file_open_)</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>journal_file_;</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>std_err_;</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>journal_zero_;</highlight></codeline>
<codeline lineno="420"><highlight class="normal">}</highlight></codeline>
<codeline lineno="421"><highlight class="normal"></highlight></codeline>
<codeline lineno="422"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Renvoie<sp/>la<sp/>ram<sp/>occupee<sp/>par<sp/>un<sp/>processeur</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="423" refid="classProcess_1a1828203162e59b0d29ffda4d04575098" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classProcess_1a1828203162e59b0d29ffda4d04575098" kindref="member">Process::ram_processeur</ref>()</highlight></codeline>
<codeline lineno="424"><highlight class="normal">{</highlight></codeline>
<codeline lineno="425"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>PETSCKSP_H</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/>PetscLogDouble<sp/>memoire;</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/>PetscMemoryGetCurrentUsage(&amp;memoire);</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>memoire;</highlight></codeline>
<codeline lineno="429"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="431"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="432"><highlight class="normal">}</highlight></codeline>
<codeline lineno="433"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sys/resource.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>ru_maxrss()</highlight></codeline>
<codeline lineno="435"><highlight class="normal">{</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Best<sp/>to<sp/>track<sp/>OOM</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">rusage<sp/>usage;</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/>getrusage(RUSAGE_SELF,<sp/>&amp;usage);</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>ru_maxrss<sp/>is<sp/>in<sp/>kilobytes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>rss_kb<sp/>=<sp/>usage.ru_maxrss;</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="keywordtype">double</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(rss_kb*1024);</highlight></codeline>
<codeline lineno="442"><highlight class="normal">}</highlight></codeline>
<codeline lineno="443"><highlight class="normal"></highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>__APPLE__</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;malloc.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="446"><highlight class="normal"></highlight></codeline>
<codeline lineno="447"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="448"><highlight class="comment">struct<sp/>mallinfo2<sp/>{</highlight></codeline>
<codeline lineno="449"><highlight class="comment"><sp/><sp/><sp/><sp/>size_t<sp/>hblkhd;<sp/><sp/><sp/><sp/>//<sp/>Space<sp/>in<sp/>mmapped<sp/>regions<sp/>(bytes)</highlight></codeline>
<codeline lineno="450"><highlight class="comment"><sp/><sp/><sp/><sp/>size_t<sp/>hblks;<sp/><sp/><sp/><sp/><sp/>//<sp/>Number<sp/>of<sp/>mmapped<sp/>regions</highlight></codeline>
<codeline lineno="451"><highlight class="comment"><sp/><sp/><sp/><sp/>size_t<sp/>usmblks;<sp/><sp/><sp/>//<sp/>Always<sp/>0<sp/>(obsolete<sp/>field)</highlight></codeline>
<codeline lineno="452"><highlight class="comment"><sp/><sp/><sp/><sp/>size_t<sp/>fsmblks;<sp/><sp/><sp/>//<sp/>Always<sp/>0<sp/>(obsolete<sp/>field)</highlight></codeline>
<codeline lineno="453"><highlight class="comment"><sp/><sp/><sp/><sp/>size_t<sp/>uordblks;<sp/><sp/>//<sp/>Total<sp/>allocated<sp/>space<sp/>(bytes)</highlight></codeline>
<codeline lineno="454"><highlight class="comment"><sp/><sp/><sp/><sp/>size_t<sp/>fordblks;<sp/><sp/>//<sp/>Total<sp/>free<sp/>space<sp/>(bytes)</highlight></codeline>
<codeline lineno="455"><highlight class="comment"><sp/><sp/><sp/><sp/>size_t<sp/>keepcost;<sp/><sp/>//<sp/>Top-most,<sp/>releasable<sp/>space<sp/>(bytes)</highlight></codeline>
<codeline lineno="456"><highlight class="comment">};</highlight></codeline>
<codeline lineno="457"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="458"><highlight class="normal"></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>heap_allocation()</highlight></codeline>
<codeline lineno="459"><highlight class="normal">{</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Best<sp/>to<sp/>track<sp/>memory<sp/>leak</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="461"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(__GLIBC__)<sp/>&amp;&amp;<sp/>__GLIBC_PREREQ(2,<sp/>33)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">mallinfo2<sp/>info<sp/>=<sp/>mallinfo2();</highlight></codeline>
<codeline lineno="463"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">mallinfo<sp/>info<sp/>=<sp/>mallinfo();</highlight></codeline>
<codeline lineno="465"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">)info.uordblks;</highlight></codeline>
<codeline lineno="467"><highlight class="normal">}</highlight></codeline>
<codeline lineno="468"><highlight class="normal"></highlight></codeline>
<codeline lineno="469"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>heap_allocated_old=0;</highlight></codeline>
<codeline lineno="470"><highlight class="normal"></highlight></codeline>
<codeline lineno="471"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>ndef<sp/>__APPLE__<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="472"><highlight class="normal"></highlight></codeline>
<codeline lineno="473" refid="classProcess_1aa1142e848c81a78c28a061a6f45b4042" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classProcess_1aa1142e848c81a78c28a061a6f45b4042" kindref="member">Process::imprimer_ram_totale</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>all_process)</highlight></codeline>
<codeline lineno="474"><highlight class="normal">{</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>memoire;</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//memoire<sp/>=<sp/>ram_processeur();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/>memoire<sp/>=<sp/>ru_maxrss();</highlight></codeline>
<codeline lineno="478"><highlight class="normal"></highlight></codeline>
<codeline lineno="479"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>__APPLE__</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>heap_allocated<sp/>=<sp/>heap_allocation();</highlight></codeline>
<codeline lineno="481"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="482"><highlight class="normal"></highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(memoire)</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Cout<sp/>&lt;&lt;<sp/>&quot;RAM<sp/>provisoire:<sp/>PETSc<sp/>&quot;<sp/>&lt;&lt;<sp/>ram_processeur()<sp/>&lt;&lt;<sp/>&quot;<sp/><sp/>ru_maxrss<sp/>&quot;<sp/>&lt;&lt;<sp/>memoire<sp/>&lt;&lt;<sp/>&quot;<sp/>mallinfo<sp/>&quot;<sp/>&lt;&lt;<sp/>heap_allocated<sp/>&lt;&lt;<sp/>finl;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>Mo=1024*1024;</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(all_process)<sp/><ref refid="classProcess_1a57e0f54b11e6eaadbea224fa904b18dd" kindref="member">Journal</ref>()<sp/>&lt;&lt;<sp/>(int)(memoire/Mo)<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>MBytes<sp/>of<sp/>RAM<sp/>taken<sp/>by<sp/>the<sp/>processor<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/><ref refid="classProcess_1ab55ba07167ec807ed3a145cac0f5dca4" kindref="member">Process::me</ref>()<sp/>&lt;&lt;<sp/>finl;</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>max_memoire=<ref refid="classProcess_1a1e9d9f9899b71927cfafae14c7bd048d" kindref="member">Process::mp_max</ref>(memoire);</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>total_memoire=<ref refid="classProcess_1a7d23bc1ef94b3f0623fbc79d034c27fd" kindref="member">Process::mp_sum</ref>(memoire);</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Cout<sp/>&lt;&lt;<sp/>(int)(total_memoire/Mo)<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>MBytes<sp/>of<sp/>RAM<sp/>taken<sp/>by<sp/>the<sp/>calculation<sp/>(max<sp/>on<sp/>a<sp/>rank:<sp/>&quot;</highlight><highlight class="normal">&lt;&lt;(int)(max_memoire/Mo)&lt;&lt;</highlight><highlight class="stringliteral">&quot;<sp/>MB).&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>finl;</highlight></codeline>
<codeline lineno="492"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>__APPLE__</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Cout<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;[RAM]<sp/>Allocated<sp/>heap<sp/>on<sp/>master<sp/>rank:<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>(int)(heap_allocated/Mo)<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>Mbytes&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>delta<sp/>=<sp/>heap_allocated<sp/>-<sp/>heap_allocated_old;</highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(delta!=0<sp/>&amp;&amp;<sp/>heap_allocated_old&gt;0)<sp/>Cout<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>(&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>(delta&gt;0<sp/>?<sp/></highlight><highlight class="stringliteral">&quot;+&quot;</highlight><highlight class="normal"><sp/>:<sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">)<sp/>&lt;&lt;<sp/>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)delta<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>bytes)&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Cout<sp/>&lt;&lt;<sp/>finl;</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>heap_allocated_old<sp/>=<sp/>heap_allocated;</highlight></codeline>
<codeline lineno="498"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>TRUST_USE_GPU</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>Go<sp/>=<sp/>1024<sp/>*<sp/>Mo;</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>allocated<sp/>=<sp/><ref refid="classProcess_1a1e9d9f9899b71927cfafae14c7bd048d" kindref="member">mp_max</ref>((</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">)<ref refid="structDeviceMemory_1a4ff61adaafc514c1913b3aab28c16796" kindref="member">DeviceMemory::allocatedBytesOnDevice</ref>());</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>total<sp/>=<sp/><ref refid="structDeviceMemory_1ab7ecf3cc58ddeafb3d73826c8e6f3d0c" kindref="member">DeviceMemory::deviceMemGetInfo</ref>(1);</highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Cout<sp/>&lt;&lt;<sp/>0.1*(int)(10*allocated/Go)<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>GBytes<sp/>of<sp/>maximal<sp/>RAM<sp/>allocated<sp/>on<sp/>a<sp/>GPU<sp/>(&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/><sp/>int(100<sp/>*<sp/>allocated<sp/>/<sp/>total)<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;%)&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>finl;</highlight></codeline>
<codeline lineno="503"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="504"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>ndef<sp/>__APPLE__<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="507"><highlight class="normal">}</highlight></codeline>
<codeline lineno="508"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="509"><highlight class="comment">/*!<sp/>@brief<sp/>Initialisation<sp/>du<sp/>journal</highlight></codeline>
<codeline lineno="510"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="511"><highlight class="comment"><sp/>*<sp/>@param<sp/>(verbose_level)<sp/>les<sp/>messages<sp/>de<sp/>niveau<sp/>&lt;=<sp/>verbose_level<sp/>seront<sp/>affiches,<sp/>les<sp/>autres<sp/>seront<sp/>mis<sp/>a<sp/>la<sp/>poubelle.</highlight></codeline>
<codeline lineno="512"><highlight class="comment"><sp/>*<sp/>@param<sp/>(file_name)<sp/>si<sp/>pointeur<sp/>nul,<sp/>tout<sp/>le<sp/>monde<sp/>ecrit<sp/>dans<sp/>cerr,<sp/>sinon<sp/>c&apos;est<sp/>le<sp/>nom<sp/>du<sp/>fichier<sp/>(doit<sp/>etre<sp/>different<sp/>sur<sp/>chaque<sp/>processeur)</highlight></codeline>
<codeline lineno="513"><highlight class="comment"><sp/>*<sp/>@param<sp/>(append)<sp/>indique<sp/>si<sp/>on<sp/>ouvre<sp/>le<sp/>fichier<sp/>en<sp/>mode<sp/>append<sp/>ou<sp/>pas.</highlight></codeline>
<codeline lineno="514"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="515"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>init_journal_file(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>verbose_level,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<sp/>file_name,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>append)</highlight></codeline>
<codeline lineno="516"><highlight class="normal">{</highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/>end_journal(verbose_level);</highlight></codeline>
<codeline lineno="518"><highlight class="normal"></highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(verbose_level<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(file_name)</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IOS_OPEN_MODE<sp/>mode<sp/>=<sp/>ios::out;</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(append)</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mode<sp/>=<sp/>ios::app;</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!journal_file_.<ref refid="classSortie__Fichier__base_1a62e30d92695a25269f12d16948e02af3" kindref="member">ouvrir</ref>(file_name,<sp/>mode))</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Cerr<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Fatal<sp/>error<sp/>in<sp/>init_journal_file:<sp/>cannot<sp/>open<sp/>journal<sp/>file&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>finl;</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classProcess_1acc2fbbe761e08e5870ae605c0705491c" kindref="member">Process::exit</ref>();</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="531"><highlight class="normal"></highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>journal_file_open_<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>journal_file_name_<sp/>=<sp/>file_name;</highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/>verbose_level_<sp/>=<sp/>verbose_level;</highlight></codeline>
<codeline lineno="537"><highlight class="normal">}</highlight></codeline>
<codeline lineno="538"><highlight class="normal"></highlight></codeline>
<codeline lineno="539"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>end_journal(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>verbose_level)</highlight></codeline>
<codeline lineno="540"><highlight class="normal">{</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Attention:<sp/>acrobatie<sp/>pour<sp/>que<sp/>ca<sp/>&quot;plante<sp/>proprement&quot;<sp/>si<sp/>le<sp/>destructeur</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>ecrit<sp/>dans<sp/>le<sp/>journal<sp/>!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/>journal_file_.<ref refid="classSortie__Fichier__base_1ac246a47c4438e3183322c20db2a3323c" kindref="member">close</ref>();</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/>journal_file_open_<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="545"><highlight class="normal">}</highlight></codeline>
<codeline lineno="546"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="547"><highlight class="comment">/*!<sp/>@brief<sp/>Renvoie<sp/>l&apos;objet<sp/>Sortie<sp/>sur<sp/>lequel<sp/>seront<sp/>redirigees<sp/>les<sp/>objets<sp/>ecrits<sp/>dans<sp/>Cerr.</highlight></codeline>
<codeline lineno="548"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="549"><highlight class="comment"><sp/>*<sp/>Cela<sp/>peut<sp/>etre<sp/>std_err_<sp/>ou<sp/>journal_file_</highlight></codeline>
<codeline lineno="550"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="551"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="552"><highlight class="normal"><ref refid="classSortie" kindref="compound">Sortie</ref>&amp;<sp/>get_Cerr()</highlight></codeline>
<codeline lineno="553"><highlight class="normal">{</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(journal_file_open_<sp/>&amp;&amp;<sp/>cerr_to_journal_)</highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>journal_file_;</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>dans<sp/>le<sp/>cas<sp/>ou<sp/>on<sp/>a<sp/>pas<sp/>initialise<sp/>les<sp/>groupes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>on<sp/>ne<sp/>peut<sp/>pas<sp/>tester<sp/>si<sp/>on<sp/>est<sp/>maitre</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classPE__Groups_1a6fe714bb78ca65d4731c8b95db492172" kindref="member">PE_Groups::get_nb_groups</ref>()==0)</highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>std_err_;</highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Seul<sp/>le<sp/>processeur<sp/>maitre<sp/>ecrit<sp/>sur<sp/>std_err_,<sp/>les<sp/>autres<sp/>ecrivent<sp/>sur<sp/>journal_file_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classProcess_1acd052b99706c577f8a5b6656217cf4c2" kindref="member">Process::je_suis_maitre</ref>())</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>std_err_;</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(verbose_level_)</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>journal_file_;</highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>journal_zero_;</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="570"><highlight class="normal">}</highlight></codeline>
<codeline lineno="571"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="572"><highlight class="comment">/*!<sp/>@brief<sp/>Si<sp/>on<sp/>est<sp/>sur<sp/>le<sp/>maitre,<sp/>on<sp/>renvoie<sp/>cout<sp/>ou<sp/>le<sp/>fichier<sp/>journal<sp/>sinon<sp/>journal_zero_.</highlight></codeline>
<codeline lineno="573"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="574"><highlight class="comment"><sp/>*<sp/><sp/><sp/>@sa<sp/>cerr_to_journal_</highlight></codeline>
<codeline lineno="575"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="576"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="577"><highlight class="normal"><ref refid="classSortie" kindref="compound">Sortie</ref>&amp;<sp/>get_Cout()</highlight></codeline>
<codeline lineno="578"><highlight class="normal">{</highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classProcess_1acd052b99706c577f8a5b6656217cf4c2" kindref="member">Process::je_suis_maitre</ref>())</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(journal_file_open_<sp/>&amp;&amp;<sp/>cerr_to_journal_)</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>journal_file_;</highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>std_out_;</highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>journal_zero_;</highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="590"><highlight class="normal">}</highlight></codeline>
<codeline lineno="591"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="592"><highlight class="comment">/*!<sp/>@brief<sp/>change<sp/>la<sp/>destination<sp/>de<sp/>Cerr<sp/>et<sp/>Cout<sp/>Si<sp/>flag=0,<sp/>c&apos;est<sp/>stderr<sp/>et<sp/>stdout,<sp/>sinon,<sp/>si<sp/>le<sp/>fichier</highlight></codeline>
<codeline lineno="593"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="594"><highlight class="comment"><sp/>*<sp/><sp/><sp/>journal<sp/>est<sp/>ouvert,<sp/>c&apos;est<sp/>le<sp/>journal,<sp/>sinon<sp/>c&apos;est</highlight></codeline>
<codeline lineno="595"><highlight class="comment"><sp/>*<sp/><sp/><sp/>Sortie_Nulle</highlight></codeline>
<codeline lineno="596"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="597"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="598"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>set_Cerr_to_journal(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>flag)</highlight></codeline>
<codeline lineno="599"><highlight class="normal">{</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/>cerr_to_journal_<sp/>=<sp/>flag;</highlight></codeline>
<codeline lineno="601"><highlight class="normal">}</highlight></codeline>
<codeline lineno="602"><highlight class="normal"></highlight></codeline>
<codeline lineno="603"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>get_journal_level()</highlight></codeline>
<codeline lineno="604"><highlight class="normal">{</highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>verbose_level_;</highlight></codeline>
<codeline lineno="606"><highlight class="normal">}</highlight></codeline>
<codeline lineno="607"><highlight class="normal"></highlight></codeline>
<codeline lineno="608"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>change_journal_level(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>level)</highlight></codeline>
<codeline lineno="609"><highlight class="normal">{</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/>verbose_level_<sp/>=<sp/>level;</highlight></codeline>
<codeline lineno="611"><highlight class="normal">}</highlight></codeline>
<codeline lineno="612"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="613"><highlight class="comment">/*!<sp/>@brief<sp/>Returns<sp/>the<sp/>disable_stop_<sp/>flag<sp/>(Disable<sp/>or<sp/>not<sp/>the<sp/>writing<sp/>of<sp/>the<sp/>.</highlight></codeline>
<codeline lineno="614"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="615"><highlight class="comment"><sp/>*<sp/>stop<sp/>file)</highlight></codeline>
<codeline lineno="616"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="617"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="618"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>get_disable_stop()</highlight></codeline>
<codeline lineno="619"><highlight class="normal">{</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>disable_stop_;</highlight></codeline>
<codeline lineno="621"><highlight class="normal">}</highlight></codeline>
<codeline lineno="622"><highlight class="normal"></highlight><highlight class="comment"></highlight></codeline>
<codeline lineno="623"><highlight class="comment">/*!<sp/>@brief<sp/>Affects<sp/>a<sp/>new<sp/>value<sp/>to<sp/>disable_stop_<sp/>flag<sp/>(Disable<sp/>or<sp/>not<sp/>the<sp/>writing<sp/>of<sp/>the<sp/>.</highlight></codeline>
<codeline lineno="624"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="625"><highlight class="comment"><sp/>*<sp/>stop<sp/>file)</highlight></codeline>
<codeline lineno="626"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="627"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="628"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>change_disable_stop(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>new_stop)</highlight></codeline>
<codeline lineno="629"><highlight class="normal">{</highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/>disable_stop_<sp/>=<sp/>new_stop;</highlight></codeline>
<codeline lineno="631"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/volatile/catA/gj277443/TRUST/sync-doc/src/Kernel/Utilitaires/Process.cpp"/>
  </compounddef>
</doxygen>
